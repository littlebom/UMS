{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/settings.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\nimport { getAdminSession } from \"./auth\";\n\nexport async function getSystemSettings() {\n    let settings = await prisma.systemSettings.findFirst();\n\n    if (!settings) {\n        // Create default settings if not exists\n        settings = await prisma.systemSettings.create({\n            data: {},\n        });\n    } else {\n        // Auto-update legacy defaults if they match the old defaults\n        // This ensures the user sees the requested default values\n        const isOldDefaultName = settings.universityName === \"University Management System\";\n        const isOldDefaultNameTh = settings.universityNameTh === \"ระบบจัดการมหาวิทยาลัย\";\n\n        if (isOldDefaultName || isOldDefaultNameTh) {\n            settings = await prisma.systemSettings.update({\n                where: { id: settings.id },\n                data: {\n                    universityName: isOldDefaultName ? \"University MS\" : settings.universityName,\n                    universityNameTh: isOldDefaultNameTh ? \"ระบบจัดการข้อมูลมหาวิทยาลัย\" : settings.universityNameTh,\n                }\n            });\n        }\n    }\n\n    return settings;\n}\n\nexport async function updateSystemSettings(formData: FormData) {\n    const session = await getAdminSession();\n    if (!session) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const universityName = formData.get(\"universityName\") as string;\n    const universityNameTh = formData.get(\"universityNameTh\") as string;\n    const logoUrl = formData.get(\"logoUrl\") as string;\n    const primaryColor = formData.get(\"primaryColor\") as string;\n    const secondaryColor = formData.get(\"secondaryColor\") as string;\n    const backgroundColor = formData.get(\"backgroundColor\") as string;\n    const studentIdFormat = formData.get(\"studentIdFormat\") as string;\n    const defaultLanguage = formData.get(\"defaultLanguage\") as string;\n\n    console.log(\"Updating settings:\", { universityName, universityNameTh, logoUrl });\n\n    const settings = await getSystemSettings();\n\n    await prisma.systemSettings.update({\n        where: { id: settings.id },\n        data: {\n            universityName,\n            universityNameTh,\n            logoUrl: logoUrl || null,\n            primaryColor,\n            secondaryColor,\n            backgroundColor,\n            studentIdFormat,\n            defaultLanguage,\n        },\n    });\n\n    revalidatePath(\"/admin/settings\");\n    revalidatePath(\"/\");\n}\n"],"names":[],"mappings":";;;;;;;IAMsB,oBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/language-switcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { useLanguage } from \"@/contexts/language-context\";\nimport { Globe } from \"lucide-react\";\n\nexport function LanguageSwitcher() {\n    const { locale, setLocale } = useLanguage();\n\n    const toggleLanguage = () => {\n        setLocale(locale === \"en\" ? \"th\" : \"en\");\n    };\n\n    return (\n        <button\n            onClick={toggleLanguage}\n            className=\"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors\"\n            title={locale === \"en\" ? \"Switch to Thai\" : \"Switch to English\"}\n        >\n            <Globe className=\"h-4 w-4\" />\n            <span>{locale === \"en\" ? \"EN\" : \"TH\"}</span>\n        </button>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACZ,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,iKAAW;IAEzC,MAAM,iBAAiB;QACnB,UAAU,WAAW,OAAO,OAAO;IACvC;IAEA,qBACI,6LAAC;QACG,SAAS;QACT,WAAU;QACV,OAAO,WAAW,OAAO,mBAAmB;;0BAE5C,6LAAC,gNAAK;gBAAC,WAAU;;;;;;0BACjB,6LAAC;0BAAM,WAAW,OAAO,OAAO;;;;;;;;;;;;AAG5C;GAjBgB;;QACkB,iKAAW;;;KAD7B"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/public-navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { GraduationCap } from \"lucide-react\";\nimport { getSystemSettings } from \"@/actions/settings\";\nimport { LanguageSwitcher } from \"@/components/language-switcher\";\nimport { useLanguage } from \"@/contexts/language-context\";\nimport { useEffect, useState } from \"react\";\n\nexport function PublicNavbar() {\n    return <PublicNavbarClient />;\n}\n\nfunction PublicNavbarClient() {\n    const [settings, setSettings] = useState<any>(null);\n    const { t } = useLanguage();\n\n    useEffect(() => {\n        getSystemSettings().then(setSettings);\n    }, []);\n\n    return (\n        <nav className=\"bg-white shadow-sm\">\n            <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n                <div className=\"flex h-16 items-center justify-between\">\n                    {/* Left: Logo */}\n                    <div className=\"flex flex-shrink-0 items-center\">\n                        <Link href=\"/\" className=\"flex items-center\">\n                            {settings?.logoUrl ? (\n                                <img\n                                    src={settings.logoUrl}\n                                    alt=\"Logo\"\n                                    className=\"h-10 w-auto object-contain\"\n                                />\n                            ) : (\n                                <>\n                                    <GraduationCap className=\"h-8 w-8 text-blue-600\" />\n                                    <span className=\"ml-2 text-xl font-bold text-gray-900\">\n                                        {settings?.universityName || \"UMS\"}\n                                    </span>\n                                </>\n                            )}\n                        </Link>\n                    </div>\n\n                    {/* Center: Menu */}\n                    <div className=\"hidden md:flex md:flex-1 md:justify-center md:space-x-8\">\n                        <Link\n                            href=\"/\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.home}\n                        </Link>\n                        <Link\n                            href=\"/curriculum\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.curriculum}\n                        </Link>\n                        <Link\n                            href=\"/admissions\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.common.admissions}\n                        </Link>\n                        <Link\n                            href=\"/students\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.students}\n                        </Link>\n                    </div>\n\n                    {/* Right: Actions */}\n                    <div className=\"flex items-center space-x-4\">\n                        <LanguageSwitcher />\n                        <Link\n                            href=\"/login\"\n                            className=\"rounded-md bg-blue-600 px-8 py-2 text-sm font-medium text-white hover:bg-blue-700\"\n                        >\n                            {t.applicant.login}\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        </nav>\n    );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASO,SAAS;IACZ,qBAAO,6LAAC;;;;;AACZ;KAFgB;AAIhB,SAAS;;IACL,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAM;IAC9C,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,iKAAW;IAEzB,IAAA,0KAAS;wCAAC;YACN,IAAA,sLAAiB,IAAG,IAAI,CAAC;QAC7B;uCAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,0KAAI;4BAAC,MAAK;4BAAI,WAAU;sCACpB,UAAU,wBACP,6LAAC;gCACG,KAAK,SAAS,OAAO;gCACrB,KAAI;gCACJ,WAAU;;;;;qDAGd;;kDACI,6LAAC,4OAAa;wCAAC,WAAU;;;;;;kDACzB,6LAAC;wCAAK,WAAU;kDACX,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;kCAQjD,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,0KAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,IAAI;;;;;;0CAEhB,6LAAC,0KAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,UAAU;;;;;;0CAEtB,6LAAC,0KAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,MAAM,CAAC,UAAU;;;;;;0CAExB,6LAAC,0KAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,QAAQ;;;;;;;;;;;;kCAKxB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,yKAAgB;;;;;0CACjB,6LAAC,0KAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,SAAS,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9C;GA1ES;;QAES,iKAAW;;;MAFpB"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/ai.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\nimport { getAdminSession } from \"./auth\";\n\n// --- Settings ---\n\nexport async function getAiSettings() {\n    const settings = await prisma.aiSettings.findFirst();\n    if (!settings) {\n        // Create default settings if not exists\n        return await prisma.aiSettings.create({\n            data: {},\n        });\n    }\n    return settings;\n}\n\nexport async function updateAiSettings(formData: FormData) {\n    const session = await getAdminSession();\n    if (!session) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const botName = formData.get(\"botName\") as string;\n    const welcomeMessage = formData.get(\"welcomeMessage\") as string;\n    const personality = formData.get(\"personality\") as string;\n    const isActive = formData.get(\"isActive\") === \"true\";\n\n    const settings = await getAiSettings();\n\n    await prisma.aiSettings.update({\n        where: { id: settings.id },\n        data: {\n            botName,\n            welcomeMessage,\n            personality,\n            isActive,\n        },\n    });\n\n    revalidatePath(\"/admin/ai-agent\");\n}\n\n// --- Knowledge Base ---\n\nexport async function getKnowledgeBaseItems() {\n    return await prisma.aiKnowledgeBase.findMany({\n        orderBy: { createdAt: \"desc\" },\n    });\n}\n\nexport async function createKnowledgeBaseItem(formData: FormData) {\n    const session = await getAdminSession();\n    if (!session) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const question = formData.get(\"question\") as string;\n    const answer = formData.get(\"answer\") as string;\n    const category = formData.get(\"category\") as string;\n\n    if (!question || !answer) {\n        throw new Error(\"Question and Answer are required\");\n    }\n\n    await prisma.aiKnowledgeBase.create({\n        data: {\n            question,\n            answer,\n            category,\n        },\n    });\n\n    revalidatePath(\"/admin/ai-agent/knowledge\");\n}\n\nexport async function deleteKnowledgeBaseItem(id: string) {\n    const session = await getAdminSession();\n    if (!session) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    await prisma.aiKnowledgeBase.delete({\n        where: { id },\n    });\n\n    revalidatePath(\"/admin/ai-agent/knowledge\");\n}\n\n// --- Chat Logic (Simple Rule-Based for now) ---\n\nexport async function sendMessageToAi(conversationId: string | null, message: string) {\n    // 1. Find or create conversation\n    let conversation;\n    if (conversationId) {\n        conversation = await prisma.aiConversation.findUnique({\n            where: { id: conversationId },\n        });\n    }\n\n    if (!conversation) {\n        conversation = await prisma.aiConversation.create({\n            data: {},\n        });\n    }\n\n    // 2. Save User Message\n    await prisma.aiMessage.create({\n        data: {\n            conversationId: conversation.id,\n            role: \"user\",\n            content: message,\n        },\n    });\n\n    // 3. Generate AI Response (Simple Keyword Matching)\n    const knowledgeBase = await prisma.aiKnowledgeBase.findMany({\n        where: { isActive: true },\n    });\n\n    let responseContent = \"I'm sorry, I don't have information about that yet. Please contact the university staff directly.\";\n    const lowerMessage = message.toLowerCase();\n\n    // Very basic keyword matching\n    for (const item of knowledgeBase) {\n        const keywords = item.question.toLowerCase().split(\" \");\n        const matchCount = keywords.filter(k => lowerMessage.includes(k)).length;\n\n        // If more than 50% of keywords match (simple heuristic)\n        if (matchCount / keywords.length > 0.5) {\n            responseContent = item.answer;\n            break;\n        }\n    }\n\n    // Fallback for greetings\n    if (lowerMessage.includes(\"hello\") || lowerMessage.includes(\"hi\")) {\n        const settings = await getAiSettings();\n        responseContent = settings.welcomeMessage;\n    }\n\n    // 4. Save AI Response\n    const aiMessage = await prisma.aiMessage.create({\n        data: {\n            conversationId: conversation.id,\n            role: \"assistant\",\n            content: responseContent,\n        },\n    });\n\n    return {\n        conversationId: conversation.id,\n        message: aiMessage,\n    };\n}\n\nexport async function getConversationMessages(conversationId: string) {\n    return await prisma.aiMessage.findMany({\n        where: { conversationId },\n        orderBy: { createdAt: \"asc\" },\n    });\n}\n"],"names":[],"mappings":";;;;;;;IA6FsB,kBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/chat-widget.tsx"],"sourcesContent":["\"use client\";\n\nimport { sendMessageToAi } from \"@/actions/ai\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { MessageCircle, X, Send } from \"lucide-react\";\n\ninterface Message {\n    id: string;\n    role: string;\n    content: string;\n    createdAt: Date;\n}\n\nexport function ChatWidget({ isEnabled }: { isEnabled: boolean }) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [input, setInput] = useState(\"\");\n    const [conversationId, setConversationId] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    };\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n    useEffect(() => {\n        if (isOpen && messages.length === 0) {\n            // Add welcome message\n            setMessages([\n                {\n                    id: \"welcome\",\n                    role: \"assistant\",\n                    content: \"Hello! How can I help you today?\",\n                    createdAt: new Date(),\n                },\n            ]);\n        }\n    }, [isOpen]);\n\n    const handleSend = async () => {\n        if (!input.trim() || isLoading) return;\n\n        const userMessage = input.trim();\n        setInput(\"\");\n        setIsLoading(true);\n\n        // Add user message to UI\n        const tempUserMsg: Message = {\n            id: `user-${Date.now()}`,\n            role: \"user\",\n            content: userMessage,\n            createdAt: new Date(),\n        };\n        setMessages((prev) => [...prev, tempUserMsg]);\n\n        try {\n            const response = await sendMessageToAi(conversationId, userMessage);\n            setConversationId(response.conversationId);\n\n            // Add AI response to UI\n            const aiMsg: Message = {\n                id: response.message.id,\n                role: response.message.role,\n                content: response.message.content,\n                createdAt: new Date(response.message.createdAt),\n            };\n            setMessages((prev) => [...prev, aiMsg]);\n        } catch (error) {\n            console.error(\"Chat error:\", error);\n            setMessages((prev) => [\n                ...prev,\n                {\n                    id: `error-${Date.now()}`,\n                    role: \"assistant\",\n                    content: \"Sorry, I encountered an error. Please try again.\",\n                    createdAt: new Date(),\n                },\n            ]);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    if (!isEnabled) return null;\n\n    return (\n        <>\n            {/* Chat Button */}\n            {!isOpen && (\n                <button\n                    onClick={() => setIsOpen(true)}\n                    className=\"fixed bottom-6 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                >\n                    <MessageCircle className=\"h-6 w-6\" />\n                </button>\n            )}\n\n            {/* Chat Window */}\n            {isOpen && (\n                <div className=\"fixed bottom-6 right-6 z-50 flex h-[500px] w-[350px] flex-col rounded-lg bg-white shadow-2xl\">\n                    {/* Header */}\n                    <div className=\"flex items-center justify-between rounded-t-lg bg-blue-600 px-4 py-3 text-white\">\n                        <div className=\"flex items-center\">\n                            <MessageCircle className=\"mr-2 h-5 w-5\" />\n                            <span className=\"font-medium\">Chat Assistant</span>\n                        </div>\n                        <button\n                            onClick={() => setIsOpen(false)}\n                            className=\"text-white hover:text-gray-200\"\n                        >\n                            <X className=\"h-5 w-5\" />\n                        </button>\n                    </div>\n\n                    {/* Messages */}\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                        {messages.map((msg) => (\n                            <div\n                                key={msg.id}\n                                className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                                    }`}\n                            >\n                                <div\n                                    className={`max-w-[80%] rounded-lg px-4 py-2 ${msg.role === \"user\"\n                                            ? \"bg-blue-600 text-white\"\n                                            : \"bg-gray-100 text-gray-900\"\n                                        }`}\n                                >\n                                    <p className=\"text-sm\">{msg.content}</p>\n                                </div>\n                            </div>\n                        ))}\n                        {isLoading && (\n                            <div className=\"flex justify-start\">\n                                <div className=\"max-w-[80%] rounded-lg bg-gray-100 px-4 py-2\">\n                                    <p className=\"text-sm text-gray-500\">Typing...</p>\n                                </div>\n                            </div>\n                        )}\n                        <div ref={messagesEndRef} />\n                    </div>\n\n                    {/* Input */}\n                    <div className=\"border-t border-gray-200 p-4\">\n                        <div className=\"flex space-x-2\">\n                            <input\n                                type=\"text\"\n                                value={input}\n                                onChange={(e) => setInput(e.target.value)}\n                                onKeyPress={(e) => e.key === \"Enter\" && handleSend()}\n                                placeholder=\"Type your message...\"\n                                className=\"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                                disabled={isLoading}\n                            />\n                            <button\n                                onClick={handleSend}\n                                disabled={isLoading || !input.trim()}\n                                className=\"rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400\"\n                            >\n                                <Send className=\"h-4 w-4\" />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;;;AAJA;;;;AAaO,SAAS,WAAW,EAAE,SAAS,EAA0B;;IAC5D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAE9C,MAAM,iBAAiB;QACnB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAChE;IAEA,IAAA,0KAAS;gCAAC;YACN;QACJ;+BAAG;QAAC;KAAS;IAEb,IAAA,0KAAS;gCAAC;YACN,IAAI,UAAU,SAAS,MAAM,KAAK,GAAG;gBACjC,sBAAsB;gBACtB,YAAY;oBACR;wBACI,IAAI;wBACJ,MAAM;wBACN,SAAS;wBACT,WAAW,IAAI;oBACnB;iBACH;YACL;QACJ;+BAAG;QAAC;KAAO;IAEX,MAAM,aAAa;QACf,IAAI,CAAC,MAAM,IAAI,MAAM,WAAW;QAEhC,MAAM,cAAc,MAAM,IAAI;QAC9B,SAAS;QACT,aAAa;QAEb,yBAAyB;QACzB,MAAM,cAAuB;YACzB,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB,MAAM;YACN,SAAS;YACT,WAAW,IAAI;QACnB;QACA,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAE5C,IAAI;YACA,MAAM,WAAW,MAAM,IAAA,oLAAe,EAAC,gBAAgB;YACvD,kBAAkB,SAAS,cAAc;YAEzC,wBAAwB;YACxB,MAAM,QAAiB;gBACnB,IAAI,SAAS,OAAO,CAAC,EAAE;gBACvB,MAAM,SAAS,OAAO,CAAC,IAAI;gBAC3B,SAAS,SAAS,OAAO,CAAC,OAAO;gBACjC,WAAW,IAAI,KAAK,SAAS,OAAO,CAAC,SAAS;YAClD;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAM;QAC1C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,eAAe;YAC7B,YAAY,CAAC,OAAS;uBACf;oBACH;wBACI,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;wBACzB,MAAM;wBACN,SAAS;wBACT,WAAW,IAAI;oBACnB;iBACH;QACL,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACI;;YAEK,CAAC,wBACE,6LAAC;gBACG,SAAS,IAAM,UAAU;gBACzB,WAAU;0BAEV,cAAA,6LAAC,4OAAa;oBAAC,WAAU;;;;;;;;;;;YAKhC,wBACG,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,4OAAa;wCAAC,WAAU;;;;;;kDACzB,6LAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;0CAElC,6LAAC;gCACG,SAAS,IAAM,UAAU;gCACzB,WAAU;0CAEV,cAAA,6LAAC,oMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAKrB,6LAAC;wBAAI,WAAU;;4BACV,SAAS,GAAG,CAAC,CAAC,oBACX,6LAAC;oCAEG,WAAW,CAAC,KAAK,EAAE,IAAI,IAAI,KAAK,SAAS,gBAAgB,iBACnD;8CAEN,cAAA,6LAAC;wCACG,WAAW,CAAC,iCAAiC,EAAE,IAAI,IAAI,KAAK,SAClD,2BACA,6BACJ;kDAEN,cAAA,6LAAC;4CAAE,WAAU;sDAAW,IAAI,OAAO;;;;;;;;;;;mCAVlC,IAAI,EAAE;;;;;4BAclB,2BACG,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;;;;;0CAIjD,6LAAC;gCAAI,KAAK;;;;;;;;;;;;kCAId,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCACG,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,YAAY,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;oCACxC,aAAY;oCACZ,WAAU;oCACV,UAAU;;;;;;8CAEd,6LAAC;oCACG,SAAS;oCACT,UAAU,aAAa,CAAC,MAAM,IAAI;oCAClC,WAAU;8CAEV,cAAA,6LAAC,6MAAI;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhD;GA9JgB;KAAA"}},
    {"offset": {"line": 572, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\nexport function formatDate(date: Date | string | number) {\n    return new Date(date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n    });\n}\n\nexport function formatCurrency(amount: number) {\n    return new Intl.NumberFormat(\"th-TH\", {\n        style: \"currency\",\n        currency: \"THB\",\n    }).format(amount);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB;AAEO,SAAS,WAAW,IAA4B;IACnD,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAC9C,MAAM;QACN,OAAO;QACP,KAAK;IACT;AACJ;AAEO,SAAS,eAAe,MAAc;IACzC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP,UAAU;IACd,GAAG,MAAM,CAAC;AACd"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/app/home-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { PublicNavbar } from \"@/components/public-navbar\";\nimport { ChatWidget } from \"@/components/chat-widget\";\nimport { formatDate } from \"@/lib/utils\";\nimport Link from \"next/link\";\nimport { ArrowRight } from \"lucide-react\";\nimport { useLanguage } from \"@/contexts/language-context\";\n\ninterface HomeClientProps {\n    banners: any[];\n    announcements: any[];\n    aiSettings: any;\n}\n\nexport function HomeClient({ banners, announcements, aiSettings }: HomeClientProps) {\n    const { t } = useLanguage();\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <PublicNavbar />\n\n            {/* Hero Section / Slider */}\n            <HeroSlider banners={banners} />\n\n            {/* News Section */}\n            <div className=\"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8\">\n                <div className=\"mb-8 flex items-center justify-between\">\n                    <h2 className=\"text-3xl font-bold tracking-tight text-gray-900\">\n                        {t.landing.latestNews}\n                    </h2>\n                </div>\n\n                <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\">\n                    {announcements.length === 0 ? (\n                        <div className=\"col-span-full text-center text-gray-500\">\n                            {t.landing.noNews}\n                        </div>\n                    ) : (\n                        announcements.map((news) => (\n                            <div\n                                key={news.id}\n                                className=\"flex flex-col overflow-hidden rounded-lg bg-white shadow-lg transition-shadow hover:shadow-xl\"\n                            >\n                                <div className=\"flex-1 p-6\">\n                                    <div className=\"flex items-center text-sm text-gray-500\">\n                                        <time dateTime={news.publishedAt?.toString()}>\n                                            {formatDate(news.publishedAt || new Date())}\n                                        </time>\n                                    </div>\n                                    <h3 className=\"mt-2 text-xl font-semibold text-gray-900\">\n                                        {news.title}\n                                    </h3>\n                                    <p className=\"mt-3 text-base text-gray-500 line-clamp-3\">\n                                        {news.content}\n                                    </p>\n                                </div>\n                                <div className=\"bg-gray-50 px-6 py-4\">\n                                    <div className=\"flex items-center text-sm font-medium text-blue-600 hover:text-blue-500\">\n                                        {t.landing.readMore} <ArrowRight className=\"ml-1 h-4 w-4\" />\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    )}\n                </div>\n            </div>\n\n            {/* Footer */}\n            <footer className=\"bg-white border-t border-gray-200\">\n                <div className=\"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8\">\n                    <p className=\"text-center text-base text-gray-400\">\n                        &copy; {new Date().getFullYear()} {t.landing.copyright}\n                    </p>\n                </div>\n            </footer>\n\n            {/* Chat Widget */}\n            <ChatWidget isEnabled={aiSettings.isActive} />\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;;;AAPA;;;;;;AAeO,SAAS,WAAW,EAAE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAmB;;IAC9E,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,iKAAW;IAEzB,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,iKAAY;;;;;0BAGb,6LAAC;gBAAW,SAAS;;;;;;0BAGrB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAG,WAAU;sCACT,EAAE,OAAO,CAAC,UAAU;;;;;;;;;;;kCAI7B,6LAAC;wBAAI,WAAU;kCACV,cAAc,MAAM,KAAK,kBACtB,6LAAC;4BAAI,WAAU;sCACV,EAAE,OAAO,CAAC,MAAM;;;;;mCAGrB,cAAc,GAAG,CAAC,CAAC,qBACf,6LAAC;gCAEG,WAAU;;kDAEV,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;0DACX,cAAA,6LAAC;oDAAK,UAAU,KAAK,WAAW,EAAE;8DAC7B,IAAA,4IAAU,EAAC,KAAK,WAAW,IAAI,IAAI;;;;;;;;;;;0DAG5C,6LAAC;gDAAG,WAAU;0DACT,KAAK,KAAK;;;;;;0DAEf,6LAAC;gDAAE,WAAU;0DACR,KAAK,OAAO;;;;;;;;;;;;kDAGrB,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,WAAU;;gDACV,EAAE,OAAO,CAAC,QAAQ;gDAAC;8DAAC,6LAAC,mOAAU;oDAAC,WAAU;;;;;;;;;;;;;;;;;;+BAlB9C,KAAK,EAAE;;;;;;;;;;;;;;;;0BA4BhC,6LAAC;gBAAO,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAE,WAAU;;4BAAsC;4BACvC,IAAI,OAAO,WAAW;4BAAG;4BAAE,EAAE,OAAO,CAAC,SAAS;;;;;;;;;;;;;;;;;0BAMlE,6LAAC,6JAAU;gBAAC,WAAW,WAAW,QAAQ;;;;;;;;;;;;AAGtD;GAlEgB;;QACE,iKAAW;;;KADb"}}]
}