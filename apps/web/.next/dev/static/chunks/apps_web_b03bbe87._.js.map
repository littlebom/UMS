{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/lib/dictionary.ts"],"sourcesContent":["export type Locale = \"en\" | \"th\";\n\nexport const dictionary = {\n    en: {\n        common: {\n            searchPlaceholder: \"Search...\",\n            signOut: \"Sign Out\",\n            adminLogin: \"Admin Login\",\n            studentPortal: \"Student Portal\",\n            help: \"Help\",\n            admissions: \"Admissions\",\n            language: \"Language\",\n        },\n        menu: {\n            home: \"Home\",\n            curriculum: \"Curriculum\",\n            students: \"Students\",\n            dashboard: \"Dashboard\",\n            overview: \"Overview\",\n            coreManagement: \"Core Management\",\n            programManagement: \"Program Management\",\n            personnelManagement: \"Personnel Management\",\n            studentManagement: \"Student Management\",\n            academic: \"Academic\",\n            academicManagement: \"Academic Management\",\n            finance: \"Finance\",\n            contentManagement: \"Content Management\",\n            announcements: \"Announcements\",\n            websiteBanners: \"Website Banners\",\n            system: \"System\",\n            reportsAnalytics: \"Reports & Analytics\",\n            aiAgent: \"AI Agent\",\n            helpCenter: \"Help Center\",\n            fileManagement: \"File Management\",\n            settings: \"Settings\",\n        },\n        landing: {\n            welcome: \"Welcome to University Management System\",\n            description: \"A comprehensive platform for managing academic and administrative tasks.\",\n            getStarted: \"Get Started\",\n            latestNews: \"Latest News\",\n            noNews: \"No news available at the moment.\",\n            readMore: \"Read full story\",\n            copyright: \"University Management System. All rights reserved.\",\n        },\n        student: {\n            myProfile: \"My Profile\",\n            grades: \"Grades\",\n            schedule: \"Class Schedule\",\n            registration: \"Registration\",\n            transcript: \"Transcript\",\n            finance: \"Finance\",\n            announcements: \"Announcements\",\n        },\n        applicant: {\n            title: \"UMS Admissions\",\n            register: \"Register\",\n            login: \"Login\",\n            applicationStatus: \"Application Status\",\n        }\n    },\n    th: {\n        common: {\n            searchPlaceholder: \"ค้นหา...\",\n            signOut: \"ออกจากระบบ\",\n            adminLogin: \"เข้าสู่ระบบผู้ดูแล\",\n            studentPortal: \"ระบบนักศึกษา\",\n            help: \"ช่วยเหลือ\",\n            admissions: \"รับสมัครนักศึกษา\",\n            language: \"ภาษา\",\n        },\n        menu: {\n            home: \"หน้าหลัก\",\n            curriculum: \"หลักสูตร\",\n            students: \"นักศึกษา\",\n            dashboard: \"แดชบอร์ด\",\n            overview: \"ภาพรวม\",\n            coreManagement: \"การจัดการหลัก\",\n            programManagement: \"จัดการหลักสูตร\",\n            personnelManagement: \"จัดการบุคลากร\",\n            studentManagement: \"จัดการนักศึกษา\",\n            academic: \"วิชาการ\",\n            academicManagement: \"จัดการวิชาการ\",\n            finance: \"การเงิน\",\n            contentManagement: \"จัดการเนื้อหา\",\n            announcements: \"ประกาศ\",\n            websiteBanners: \"แบนเนอร์เว็บไซต์\",\n            system: \"ระบบ\",\n            reportsAnalytics: \"รายงานและสถิติ\",\n            aiAgent: \"AI Agent\",\n            helpCenter: \"ศูนย์ช่วยเหลือ\",\n            fileManagement: \"จัดการไฟล์\",\n            settings: \"ตั้งค่าระบบ\",\n        },\n        landing: {\n            welcome: \"ยินดีต้อนรับสู่ระบบจัดการมหาวิทยาลัย\",\n            description: \"แพลตฟอร์มครบวงจรสำหรับการบริหารจัดการงานวิชาการและธุรการ\",\n            getStarted: \"เริ่มต้นใช้งาน\",\n            latestNews: \"ข่าวสารล่าสุด\",\n            noNews: \"ไม่มีข่าวสารในขณะนี้\",\n            readMore: \"อ่านต่อ\",\n            copyright: \"ระบบจัดการมหาวิทยาลัย สงวนลิขสิทธิ์\",\n        },\n        student: {\n            myProfile: \"โปรไฟล์ของฉัน\",\n            grades: \"ผลการเรียน\",\n            schedule: \"ตารางเรียน\",\n            registration: \"ลงทะเบียนเรียน\",\n            transcript: \"ทรานสคริปต์\",\n            finance: \"การเงิน\",\n            announcements: \"ประกาศ\",\n        },\n        applicant: {\n            title: \"ระบบรับสมัครนักศึกษา\",\n            register: \"ลงทะเบียน\",\n            login: \"เข้าสู่ระบบ\",\n            applicationStatus: \"สถานะการสมัคร\",\n        }\n    },\n};\n"],"names":[],"mappings":";;;;AAEO,MAAM,aAAa;IACtB,IAAI;QACA,QAAQ;YACJ,mBAAmB;YACnB,SAAS;YACT,YAAY;YACZ,eAAe;YACf,MAAM;YACN,YAAY;YACZ,UAAU;QACd;QACA,MAAM;YACF,MAAM;YACN,YAAY;YACZ,UAAU;YACV,WAAW;YACX,UAAU;YACV,gBAAgB;YAChB,mBAAmB;YACnB,qBAAqB;YACrB,mBAAmB;YACnB,UAAU;YACV,oBAAoB;YACpB,SAAS;YACT,mBAAmB;YACnB,eAAe;YACf,gBAAgB;YAChB,QAAQ;YACR,kBAAkB;YAClB,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,UAAU;QACd;QACA,SAAS;YACL,SAAS;YACT,aAAa;YACb,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,UAAU;YACV,WAAW;QACf;QACA,SAAS;YACL,WAAW;YACX,QAAQ;YACR,UAAU;YACV,cAAc;YACd,YAAY;YACZ,SAAS;YACT,eAAe;QACnB;QACA,WAAW;YACP,OAAO;YACP,UAAU;YACV,OAAO;YACP,mBAAmB;QACvB;IACJ;IACA,IAAI;QACA,QAAQ;YACJ,mBAAmB;YACnB,SAAS;YACT,YAAY;YACZ,eAAe;YACf,MAAM;YACN,YAAY;YACZ,UAAU;QACd;QACA,MAAM;YACF,MAAM;YACN,YAAY;YACZ,UAAU;YACV,WAAW;YACX,UAAU;YACV,gBAAgB;YAChB,mBAAmB;YACnB,qBAAqB;YACrB,mBAAmB;YACnB,UAAU;YACV,oBAAoB;YACpB,SAAS;YACT,mBAAmB;YACnB,eAAe;YACf,gBAAgB;YAChB,QAAQ;YACR,kBAAkB;YAClB,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,UAAU;QACd;QACA,SAAS;YACL,SAAS;YACT,aAAa;YACb,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,UAAU;YACV,WAAW;QACf;QACA,SAAS;YACL,WAAW;YACX,QAAQ;YACR,UAAU;YACV,cAAc;YACd,YAAY;YACZ,SAAS;YACT,eAAe;QACnB;QACA,WAAW;YACP,OAAO;YACP,UAAU;YACV,OAAO;YACP,mBAAmB;QACvB;IACJ;AACJ"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/translation.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\nimport { dictionary } from \"@/lib/dictionary\";\n\nexport async function getTranslations() {\n    try {\n        // @ts-ignore - Prisma client update might not be picked up by IDE yet\n        const translations = await prisma.translation.findMany();\n\n        // Convert array to object { key: { en: valueEn, th: valueTh } }\n        const translationMap: Record<string, { en: string; th: string }> = {};\n\n        translations.forEach((t: any) => {\n            translationMap[t.key] = {\n                en: t.valueEn,\n                th: t.valueTh,\n            };\n        });\n\n        return translationMap;\n    } catch (error) {\n        console.error(\"Failed to fetch translations:\", error);\n        return {};\n    }\n}\n\nexport async function updateTranslation(key: string, values: { en: string; th: string }) {\n    try {\n        // @ts-ignore\n        await prisma.translation.upsert({\n            where: { key },\n            update: {\n                valueEn: values.en,\n                valueTh: values.th,\n            },\n            create: {\n                key,\n                valueEn: values.en,\n                valueTh: values.th,\n            },\n        });\n\n        revalidatePath(\"/\");\n        return { success: true };\n    } catch (error) {\n        console.error(\"Failed to update translation:\", error);\n        return { success: false, error: \"Failed to update translation\" };\n    }\n}\n\nexport async function seedTranslations() {\n    try {\n        const operations = [];\n\n        // Helper to flatten the dictionary\n        const flattenDictionary = (obj: any, prefix = \"\") => {\n            let result: Record<string, string> = {};\n            for (const key in obj) {\n                if (typeof obj[key] === \"object\" && obj[key] !== null) {\n                    const nested = flattenDictionary(obj[key], `${prefix}${key}.`);\n                    result = { ...result, ...nested };\n                } else {\n                    result[`${prefix}${key}`] = obj[key];\n                }\n            }\n            return result;\n        };\n\n        const enFlat = flattenDictionary(dictionary.en);\n        const thFlat = flattenDictionary(dictionary.th);\n\n        // Get all unique keys\n        const allKeys = new Set([...Object.keys(enFlat), ...Object.keys(thFlat)]);\n\n        for (const key of Array.from(allKeys)) {\n            operations.push(\n                // @ts-ignore\n                prisma.translation.upsert({\n                    where: { key },\n                    update: {\n                        // Only update if missing? Or overwrite? \n                        // Let's overwrite to ensure sync with file initially, \n                        // but in production we might want to be careful.\n                        // For this task, we assume file is source of truth for initial seed.\n                        valueEn: enFlat[key] || \"\",\n                        valueTh: thFlat[key] || \"\",\n                    },\n                    create: {\n                        key,\n                        valueEn: enFlat[key] || \"\",\n                        valueTh: thFlat[key] || \"\",\n                    },\n                })\n            );\n        }\n\n        await prisma.$transaction(operations);\n\n        revalidatePath(\"/\");\n        return { success: true, count: operations.length };\n    } catch (error) {\n        console.error(\"Failed to seed translations:\", error);\n        return { success: false, error: String(error) };\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAMsB,kBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/contexts/language-context.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { dictionary as defaultDictionary } from \"@/lib/dictionary\";\nimport { getTranslations } from \"@/actions/translation\";\n\ntype Locale = \"en\" | \"th\";\ntype Dictionary = typeof defaultDictionary.en;\n\ninterface LanguageContextType {\n    locale: Locale;\n    setLocale: (locale: Locale) => void;\n    t: Dictionary;\n    isLoading: boolean;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\n    const [locale, setLocale] = useState<Locale>(\"en\");\n    const [dynamicDictionary, setDynamicDictionary] = useState<typeof defaultDictionary>(defaultDictionary);\n    const [isLoading, setIsLoading] = useState(true);\n    const [mounted, setMounted] = useState(false);\n\n    useEffect(() => {\n        setMounted(true);\n\n        // Load locale preference\n        const savedLocale = localStorage.getItem(\"locale\") as Locale;\n        if (savedLocale) {\n            setLocale(savedLocale);\n        }\n\n        // Fetch translations from DB\n        const fetchTranslations = async () => {\n            try {\n                const dbTranslations = await getTranslations();\n\n                if (Object.keys(dbTranslations).length > 0) {\n                    // Reconstruct nested dictionary from flat keys\n                    const newDictionary = JSON.parse(JSON.stringify(defaultDictionary)); // Deep copy structure\n\n                    Object.entries(dbTranslations).forEach(([key, values]) => {\n                        const parts = key.split(\".\");\n                        // We assume 2 levels deep for now based on current dictionary (e.g., common.welcome)\n                        // If deeper, we'd need a recursive helper.\n                        // Current dictionary has: common, menu, landing, student, applicant.\n                        if (parts.length === 2) {\n                            const [section, item] = parts;\n                            if (newDictionary.en[section as keyof Dictionary] && newDictionary.th[section as keyof Dictionary]) {\n                                // @ts-ignore - Dynamic assignment\n                                newDictionary.en[section][item] = values.en;\n                                // @ts-ignore\n                                newDictionary.th[section][item] = values.th;\n                            }\n                        }\n                    });\n                    setDynamicDictionary(newDictionary);\n                }\n            } catch (error) {\n                console.error(\"Failed to load translations\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        fetchTranslations();\n    }, []);\n\n    const handleSetLocale = (newLocale: Locale) => {\n        setLocale(newLocale);\n        if (typeof window !== 'undefined') {\n            localStorage.setItem(\"locale\", newLocale);\n        }\n    };\n\n    const t = dynamicDictionary[locale];\n\n    // Prevent hydration mismatch\n    if (!mounted) {\n        return null;\n    }\n\n    return (\n        <LanguageContext.Provider value={{ locale, setLocale: handleSetLocale, t, isLoading }}>\n            {children}\n        </LanguageContext.Provider>\n    );\n}\n\nexport function useLanguage() {\n    const context = useContext(LanguageContext);\n    if (context === undefined) {\n        throw new Error(\"useLanguage must be used within a LanguageProvider\");\n    }\n    return context;\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAgBA,MAAM,gCAAkB,IAAA,8KAAa,EAAkC;AAEhE,SAAS,iBAAiB,EAAE,QAAQ,EAAiC;;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAS;IAC7C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAA2B,iJAAiB;IACtG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;sCAAC;YACN,WAAW;YAEX,yBAAyB;YACzB,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,IAAI,aAAa;gBACb,UAAU;YACd;YAEA,6BAA6B;YAC7B,MAAM;gEAAoB;oBACtB,IAAI;wBACA,MAAM,iBAAiB,MAAM,IAAA,oLAAe;wBAE5C,IAAI,OAAO,IAAI,CAAC,gBAAgB,MAAM,GAAG,GAAG;4BACxC,+CAA+C;4BAC/C,MAAM,gBAAgB,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,iJAAiB,IAAI,sBAAsB;4BAE3F,OAAO,OAAO,CAAC,gBAAgB,OAAO;gFAAC,CAAC,CAAC,KAAK,OAAO;oCACjD,MAAM,QAAQ,IAAI,KAAK,CAAC;oCACxB,qFAAqF;oCACrF,2CAA2C;oCAC3C,qEAAqE;oCACrE,IAAI,MAAM,MAAM,KAAK,GAAG;wCACpB,MAAM,CAAC,SAAS,KAAK,GAAG;wCACxB,IAAI,cAAc,EAAE,CAAC,QAA4B,IAAI,cAAc,EAAE,CAAC,QAA4B,EAAE;4CAChG,kCAAkC;4CAClC,cAAc,EAAE,CAAC,QAAQ,CAAC,KAAK,GAAG,OAAO,EAAE;4CAC3C,aAAa;4CACb,cAAc,EAAE,CAAC,QAAQ,CAAC,KAAK,GAAG,OAAO,EAAE;wCAC/C;oCACJ;gCACJ;;4BACA,qBAAqB;wBACzB;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,+BAA+B;oBACjD,SAAU;wBACN,aAAa;oBACjB;gBACJ;;YAEA;QACJ;qCAAG,EAAE;IAEL,MAAM,kBAAkB,CAAC;QACrB,UAAU;QACV,wCAAmC;YAC/B,aAAa,OAAO,CAAC,UAAU;QACnC;IACJ;IAEA,MAAM,IAAI,iBAAiB,CAAC,OAAO;IAEnC,6BAA6B;IAC7B,IAAI,CAAC,SAAS;QACV,OAAO;IACX;IAEA,qBACI,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAQ,WAAW;YAAiB;YAAG;QAAU;kBAC/E;;;;;;AAGb;GAtEgB;KAAA;AAwET,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { SessionProvider } from \"next-auth/react\";\nimport { ReactNode } from \"react\";\n\nexport function Providers({ children }: { children: ReactNode }) {\n    return <SessionProvider>{children}</SessionProvider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC3D,qBAAO,6LAAC,oKAAe;kBAAE;;;;;;AAC7B;KAFgB"}}]
}