{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/admissions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport bcrypt from \"bcryptjs\";\nimport { cookies } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\nimport { Gender } from \"@prisma/client\";\n\nexport async function registerApplicant(prevState: any, formData: FormData) {\n    try {\n        // 1. Extract Data\n        const email = formData.get(\"email\") as string;\n        const password = formData.get(\"password\") as string;\n        const confirmPassword = formData.get(\"confirmPassword\") as string;\n\n        const firstName = formData.get(\"firstName\") as string; // English First Name\n        const lastName = formData.get(\"lastName\") as string;   // English Last Name\n        const title = formData.get(\"title\") as string;\n        const firstNameTh = formData.get(\"firstNameTh\") as string;\n        const lastNameTh = formData.get(\"lastNameTh\") as string;\n        const nationality = formData.get(\"nationality\") as string;\n        const citizenId = formData.get(\"citizenId\") as string;\n        const birthDateStr = formData.get(\"birthDate\") as string; // YYYY-MM-DD\n        const gender = formData.get(\"gender\") as Gender;\n        const phone = formData.get(\"phone\") as string;\n\n        const address = formData.get(\"address\") as string;\n        const subDistrict = formData.get(\"subDistrict\") as string;\n        const district = formData.get(\"district\") as string;\n        const province = formData.get(\"province\") as string;\n        const zipCode = formData.get(\"zipCode\") as string;\n\n        // Education History (JSON String)\n        const educationHistoryJson = formData.get(\"educationHistory\") as string;\n        let educationHistoryData = [];\n        try {\n            educationHistoryData = JSON.parse(educationHistoryJson);\n        } catch (e) {\n            console.error(\"Failed to parse education history\", e);\n        }\n\n        // 2. Validation\n        if (password !== confirmPassword) {\n            return { error: \"Passwords do not match\" };\n        }\n\n        const existingUser = await prisma.user.findUnique({ where: { email } });\n        if (existingUser) {\n            return { error: \"Email is already registered\" };\n        }\n\n        const existingCitizen = await prisma.applicant.findUnique({ where: { citizenId } });\n        if (existingCitizen) {\n            return { error: \"Citizen ID is already registered\" };\n        }\n\n        // 3. Hash Password\n        const passwordHash = await bcrypt.hash(password, 10);\n\n        const trackId = formData.get(\"trackId\") as string;\n\n        // 4. Create User & Applicant Profile\n        const newUser = await prisma.user.create({\n            data: {\n                email,\n                passwordHash,\n                role: \"APPLICANT\",\n                applicantProfile: {\n                    create: {\n                        title,\n                        firstName,\n                        lastName,\n                        firstNameTh,\n                        lastNameTh,\n                        nationality,\n                        citizenId,\n                        birthDate: new Date(birthDateStr),\n                        gender,\n                        phone,\n                        address,\n                        subDistrict,\n                        district,\n                        province,\n                        zipCode,\n                        // Create related EducationHistory records\n                        educationHistory: {\n                            create: educationHistoryData.map((edu: any) => ({\n                                level: edu.level,\n                                degreeName: edu.degreeName,\n                                institution: edu.institution,\n                                gpa: edu.gpa,\n                                graduationYear: edu.graduationYear ? parseInt(edu.graduationYear) : undefined,\n                            })),\n                        },\n                    },\n                },\n            },\n            include: {\n                applicantProfile: true,\n            },\n        });\n\n        // 4.1 Create Application if trackId is provided\n        if (trackId && newUser.applicantProfile) {\n            // Fetch track to get programId\n            const track = await prisma.admissionTrack.findUnique({\n                where: { id: trackId },\n                select: { programId: true }\n            });\n\n            if (track) {\n                await prisma.application.create({\n                    data: {\n                        applicantId: newUser.applicantProfile.id,\n                        programId: track.programId,\n                        trackId: trackId,\n                        status: \"DRAFT\"\n                    }\n                });\n            }\n        }\n\n        // 5. Create Session (Auto Login)\n        const sessionData = {\n            userId: newUser.id,\n            role: newUser.role,\n            applicantId: newUser.applicantProfile?.id,\n            name: `${firstName} ${lastName}`,\n        };\n\n        (await cookies()).set(\"applicant_session\", JSON.stringify(sessionData), {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === \"production\",\n            maxAge: 60 * 60 * 24 * 7, // 1 week\n            path: \"/\",\n        });\n\n    } catch (error) {\n        console.error(\"Registration error:\", error);\n        return { error: \"Something went wrong. Please try again.\" };\n    }\n\n    // 6. Redirect (Must be outside try-catch)\n    redirect(\"/admissions/dashboard\");\n}\n"],"names":[],"mappings":";;;;;;;IAQsB,oBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/ui/select.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { ChevronDown, Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\"; // Assuming you have a utility for class merging, or I'll use simple string template\n\n// Simple class merger if not available\nfunction classNames(...classes: (string | undefined | null | false)[]) {\n    return classes.filter(Boolean).join(\" \");\n}\n\nexport interface SelectOption {\n    value: string;\n    label: string;\n    description?: string;\n    status?: \"success\" | \"warning\" | \"error\" | \"info\" | \"neutral\";\n}\n\ninterface SelectProps {\n    label?: string;\n    value: string;\n    onChange: (value: string) => void;\n    options: SelectOption[];\n    placeholder?: string;\n    disabled?: boolean;\n    required?: boolean;\n    error?: string;\n    className?: string;\n    showDescriptionInValue?: boolean;\n}\n\nexport function Select({\n    label,\n    value,\n    onChange,\n    options,\n    placeholder = \"Select an option\",\n    disabled = false,\n    required = false,\n    error,\n    className,\n    showDescriptionInValue = true,\n}: SelectProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const selectedOption = options.find((opt) => opt.value === value);\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n                setIsOpen(false);\n            }\n        };\n\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n    }, []);\n\n    const handleSelect = (optionValue: string) => {\n        onChange(optionValue);\n        setIsOpen(false);\n    };\n\n    const getStatusColor = (status?: string) => {\n        switch (status) {\n            case \"success\": return \"bg-green-400\";\n            case \"warning\": return \"bg-yellow-400\";\n            case \"error\": return \"bg-red-400\";\n            case \"info\": return \"bg-blue-400\";\n            case \"neutral\": return \"bg-gray-400\";\n            default: return null;\n        }\n    };\n\n    return (\n        <div className={classNames(\"relative\", className)} ref={containerRef}>\n            {label && (\n                <label className=\"mb-1 block text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\n                    {label} {required && <span className=\"text-red-500\">*</span>}\n                </label>\n            )}\n\n            <button\n                type=\"button\"\n                onClick={() => !disabled && setIsOpen(!isOpen)}\n                disabled={disabled}\n                className={classNames(\n                    \"relative w-full cursor-default rounded-lg border bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm\",\n                    error ? \"border-red-500 focus:ring-red-500\" : \"border-gray-300\",\n                    disabled ? \"bg-gray-100 cursor-not-allowed opacity-50\" : \"hover:border-gray-400\"\n                )}\n            >\n                <span className=\"block truncate\">\n                    {selectedOption ? (\n                        <span className=\"flex items-center gap-2\">\n                            {selectedOption.status && (\n                                <span className={classNames(\"h-2 w-2 rounded-full\", getStatusColor(selectedOption.status))} />\n                            )}\n                            <span className=\"font-medium text-gray-900\">{selectedOption.label}</span>\n                            {showDescriptionInValue && selectedOption.description && (\n                                <span className=\"ml-2 truncate text-gray-500\">{selectedOption.description}</span>\n                            )}\n                        </span>\n                    ) : (\n                        <span className=\"text-gray-500\">{placeholder}</span>\n                    )}\n                </span>\n                <span className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\">\n                    <ChevronDown className=\"h-4 w-4 text-gray-400\" aria-hidden=\"true\" />\n                </span>\n            </button>\n\n            {isOpen && (\n                <div className=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\">\n                    {options.length === 0 ? (\n                        <div className=\"relative cursor-default select-none py-2 pl-3 pr-9 text-gray-500\">\n                            No options available\n                        </div>\n                    ) : (\n                        options.map((option) => (\n                            <div\n                                key={option.value}\n                                onClick={() => handleSelect(option.value)}\n                                className={classNames(\n                                    \"relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-blue-50 cursor-pointer\",\n                                    value === option.value ? \"bg-blue-50\" : \"text-gray-900\"\n                                )}\n                            >\n                                <div className=\"flex items-center\">\n                                    {option.status && (\n                                        <span className={classNames(\"mr-2 h-2 w-2 flex-shrink-0 rounded-full\", getStatusColor(option.status))} />\n                                    )}\n                                    <span className={classNames(\"block truncate\", value === option.value ? \"font-semibold\" : \"font-normal\")}>\n                                        {option.label}\n                                    </span>\n                                    {option.description && (\n                                        <span className=\"ml-2 truncate text-gray-500\">\n                                            - {option.description}\n                                        </span>\n                                    )}\n                                </div>\n\n                                {value === option.value && (\n                                    <span className=\"absolute inset-y-0 right-0 flex items-center pr-4 text-blue-600\">\n                                        <Check className=\"h-4 w-4\" aria-hidden=\"true\" />\n                                    </span>\n                                )}\n                            </div>\n                        ))\n                    )}\n                </div>\n            )}\n            {error && <p className=\"mt-1 text-xs text-red-500\">{error}</p>}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/app/admissions/register/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useFormStatus } from \"react-dom\";\nimport { registerApplicant } from \"@/actions/admissions\";\nimport Link from \"next/link\";\nimport { GraduationCap, ArrowRight, ArrowLeft, Check, Loader2, Plus, Trash2, User, Camera } from \"lucide-react\";\nimport { Select, SelectOption } from \"@/components/ui/select\";\n\n// Select options\nconst nationalityOptions: SelectOption[] = [\n    { value: \"Thai\", label: \"Thai\", description: \"Thai citizen\" },\n    { value: \"Other\", label: \"Other\", description: \"International Student\" },\n];\n\nconst countryOptions: SelectOption[] = [\n    { value: \"Thailand\", label: \"Thailand\" },\n    { value: \"Other\", label: \"Other\" },\n];\n\nconst titleOptions: SelectOption[] = [\n    { value: \"Mr.\", label: \"Mr.\" },\n    { value: \"Mrs.\", label: \"Mrs.\" },\n    { value: \"Ms.\", label: \"Ms.\" },\n    { value: \"Other\", label: \"Other\" },\n];\n\nconst genderOptions: SelectOption[] = [\n    { value: \"MALE\", label: \"Male\" },\n    { value: \"FEMALE\", label: \"Female\" },\n    { value: \"OTHER\", label: \"Other\" },\n];\n\nconst educationLevelOptions: SelectOption[] = [\n    { value: \"High School\", label: \"High School\" },\n    { value: \"Diploma\", label: \"Diploma\" },\n    { value: \"Bachelor\", label: \"Bachelor's Degree\" },\n    { value: \"Master\", label: \"Master's Degree\" },\n    { value: \"Doctorate\", label: \"Doctorate\" },\n    { value: \"Other\", label: \"Other\" },\n];\n\nimport { useSearchParams } from \"next/navigation\";\n\nexport default function RegisterPage() {\n    const searchParams = useSearchParams();\n    const trackId = searchParams.get(\"trackId\");\n\n    const [step, setStep] = useState(1);\n    const [formData, setFormData] = useState({\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        title: \"Mr.\",\n        firstName: \"\", // English\n        lastName: \"\",  // English\n        firstNameTh: \"\",\n        lastNameTh: \"\",\n        nationality: \"Thai\",\n        citizenId: \"\",\n        birthDate: \"\",\n        gender: \"MALE\",\n        phone: \"\",\n        address: \"\",\n        subDistrict: \"\",\n        district: \"\",\n        province: \"\",\n        country: \"Thailand\",\n        otherCountry: \"\",\n        zipCode: \"\",\n        // Education History Array\n        educationHistory: [\n            { level: \"High School\", degreeName: \"\", institution: \"\", gpa: \"\", graduationYear: \"\" }\n        ],\n    });\n    const [error, setError] = useState<string | null>(null);\n    const [extraDocs, setExtraDocs] = useState<number[]>([]);\n    const [profileImagePreview, setProfileImagePreview] = useState<string | null>(null);\n\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setProfileImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const addDoc = () => {\n        setExtraDocs([...extraDocs, extraDocs.length + 1]);\n    };\n\n    // Education History Handlers\n    const addEducation = () => {\n        setFormData({\n            ...formData,\n            educationHistory: [\n                ...formData.educationHistory,\n                { level: \"Bachelor\", degreeName: \"\", institution: \"\", gpa: \"\", graduationYear: \"\" }\n            ]\n        });\n    };\n\n    const removeEducation = (index: number) => {\n        if (formData.educationHistory.length > 1) {\n            const newHistory = [...formData.educationHistory];\n            newHistory.splice(index, 1);\n            setFormData({ ...formData, educationHistory: newHistory });\n        }\n    };\n\n    const handleEducationChange = (index: number, field: string, value: string) => {\n        const newHistory = [...formData.educationHistory];\n        newHistory[index] = { ...newHistory[index], [field]: value };\n        setFormData({ ...formData, educationHistory: newHistory });\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const nextStep = () => {\n        // Simple validation before next\n        if (step === 1) {\n            if (!formData.email || !formData.password || !formData.confirmPassword || !formData.firstName || !formData.lastName || !formData.citizenId || !formData.birthDate || !formData.phone) {\n                setError(\"Please fill in all required fields\");\n                return;\n            }\n            if (formData.nationality === \"Thai\" && (!formData.firstNameTh || !formData.lastNameTh)) {\n                setError(\"Please fill in Thai Name fields\");\n                return;\n            }\n            if (formData.password !== formData.confirmPassword) {\n                setError(\"Passwords do not match\");\n                return;\n            }\n        }\n        setError(null);\n        setStep(step + 1);\n    };\n\n    const prevStep = () => {\n        setError(null);\n        setStep(step - 1);\n    };\n\n    // Server Action Wrapper\n    async function clientAction(formDataObj: FormData) {\n        // Append educationHistory as JSON string\n        formDataObj.append(\"educationHistory\", JSON.stringify(formData.educationHistory));\n        const result = await registerApplicant(null, formDataObj);\n        if (result?.error) {\n            setError(result.error);\n        }\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n                <Link href=\"/\" className=\"flex justify-center items-center gap-2\">\n                    <GraduationCap className=\"h-10 w-10 text-blue-600\" />\n                    <span className=\"text-2xl font-bold text-gray-900\">UMS Admissions</span>\n                </Link>\n                <h2 className=\"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900\">\n                    Create your applicant account\n                </h2>\n                <p className=\"mt-2 text-center text-sm text-gray-600\">\n                    Already have an account?{\" \"}\n                    <Link href=\"/login\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n                        Sign in\n                    </Link>\n                </p>\n            </div>\n\n            <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-4xl\">\n                <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n\n                    {/* Progress Bar */}\n                    <div className=\"mb-8\">\n                        <div className=\"flex items-center justify-between relative\">\n                            <div className=\"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-gray-200 -z-10\"></div>\n                            <StepIndicator currentStep={step} stepNumber={1} label=\"Personal Info\" />\n                            <StepIndicator currentStep={step} stepNumber={2} label=\"Education & Docs\" />\n                        </div>\n                    </div>\n\n                    {error && (\n                        <div className=\"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm\">\n                            {error}\n                        </div>\n                    )}\n\n                    <form action={clientAction}>\n                        {trackId && <input type=\"hidden\" name=\"trackId\" value={trackId} />}\n                        {/* Hidden inputs to submit all data at once (except educationHistory which is handled manually) */}\n                        {Object.entries(formData).map(([key, value]) => {\n                            if (key === 'educationHistory') return null;\n                            return <input key={key} type=\"hidden\" name={key} value={value as string} />\n                        })}\n\n                        {/* Step 1: Account & Personal Info */}\n                        {step === 1 && (\n                            <div className=\"space-y-8\">\n                                {/* ... (Account & Personal & Address Sections remain same) ... */}\n\n\n                                {/* Personal Section */}\n                                <div>\n                                    <h3 className=\"text-lg font-medium leading-6 text-gray-900 mb-4 border-b pb-2\">Personal Information</h3>\n\n                                    {/* Profile Image Upload */}\n                                    <div className=\"flex flex-col items-center mb-6\">\n                                        <div className=\"relative group cursor-pointer\">\n                                            <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 bg-gray-100 flex items-center justify-center\">\n                                                {profileImagePreview ? (\n                                                    <img src={profileImagePreview} alt=\"Profile Preview\" className=\"w-full h-full object-cover\" />\n                                                ) : (\n                                                    <User className=\"w-16 h-16 text-gray-400\" />\n                                                )}\n                                            </div>\n                                            <label htmlFor=\"profile-image-upload\" className=\"absolute bottom-0 right-0 bg-blue-600 p-2 rounded-full text-white hover:bg-blue-700 transition-colors shadow-lg cursor-pointer\">\n                                                <Camera className=\"w-5 h-5\" />\n                                                <input\n                                                    id=\"profile-image-upload\"\n                                                    name=\"profileImage\"\n                                                    type=\"file\"\n                                                    accept=\"image/*\"\n                                                    className=\"hidden\"\n                                                    onChange={handleImageChange}\n                                                />\n                                            </label>\n                                        </div>\n                                        <p className=\"mt-2 text-sm text-gray-500\">Upload Profile Picture</p>\n                                    </div>\n\n                                    <div className=\"mb-6 flex flex-col items-center\">\n                                        <div className=\"w-full max-w-xs\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1 text-center\">Nationality</label>\n                                            <Select\n                                                value={formData.nationality}\n                                                onChange={(value) => setFormData(prev => ({ ...prev, nationality: value }))}\n                                                options={nationalityOptions}\n                                                className=\"w-full\"\n                                                showDescriptionInValue={false}\n                                            />\n                                        </div>\n                                    </div>\n\n                                    <div className=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-12\">\n                                        <div className=\"sm:col-span-2\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\n                                            <Select\n                                                value={formData.title}\n                                                onChange={(value) => setFormData(prev => ({ ...prev, title: value }))}\n                                                options={titleOptions}\n                                                showDescriptionInValue={false}\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">First Name (English)</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"firstName\"\n                                                required\n                                                value={formData.firstName}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Last Name (English)</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"lastName\"\n                                                required\n                                                value={formData.lastName}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n\n\n\n                                        {formData.nationality === \"Thai\" && (\n                                            <>\n                                                <div className=\"sm:col-span-2 hidden sm:block\"></div>\n                                                <div className=\"sm:col-span-5\">\n                                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">First Name (Thai)</label>\n                                                    <input\n                                                        type=\"text\"\n                                                        name=\"firstNameTh\"\n                                                        required\n                                                        value={formData.firstNameTh}\n                                                        onChange={handleChange}\n                                                        className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                    />\n                                                </div>\n                                                <div className=\"sm:col-span-5\">\n                                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Last Name (Thai)</label>\n                                                    <input\n                                                        type=\"text\"\n                                                        name=\"lastNameTh\"\n                                                        required\n                                                        value={formData.lastNameTh}\n                                                        onChange={handleChange}\n                                                        className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                    />\n                                                </div>\n                                            </>\n                                        )}\n\n                                        <div className=\"sm:col-span-2 hidden sm:block\"></div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Citizen ID / Passport No.</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"citizenId\"\n                                                required\n                                                maxLength={20}\n                                                value={formData.citizenId}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Phone Number</label>\n                                            <input\n                                                type=\"tel\"\n                                                name=\"phone\"\n                                                required\n                                                value={formData.phone}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n\n                                        <div className=\"sm:col-span-2 hidden sm:block\"></div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Birth Date</label>\n                                            <input\n                                                type=\"date\"\n                                                name=\"birthDate\"\n                                                required\n                                                value={formData.birthDate}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-5\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Gender</label>\n                                            <Select\n                                                value={formData.gender}\n                                                onChange={(value) => setFormData(prev => ({ ...prev, gender: value }))}\n                                                options={genderOptions}\n                                                showDescriptionInValue={false}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Address Section */}\n                                <div>\n                                    <h3 className=\"text-lg font-medium leading-6 text-gray-900 mb-4 border-b pb-2\">Address</h3>\n                                    <div className=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6\">\n                                        <div className=\"sm:col-span-6\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Address (House No, Village, Road)</label>\n                                            <textarea\n                                                name=\"address\"\n                                                rows={2}\n                                                required\n                                                value={formData.address}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sub-district (Tambon)</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"subDistrict\"\n                                                required\n                                                value={formData.subDistrict}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">District (Amphoe)</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"district\"\n                                                required\n                                                value={formData.district}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Province</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"province\"\n                                                required\n                                                value={formData.province}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Zip Code</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"zipCode\"\n                                                required\n                                                value={formData.zipCode}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Country</label>\n                                            <Select\n                                                value={formData.country}\n                                                onChange={(value) => setFormData(prev => ({ ...prev, country: value }))}\n                                                options={countryOptions}\n                                                showDescriptionInValue={false}\n                                            />\n                                        </div>\n                                        {formData.country === \"Other\" && (\n                                            <div className=\"sm:col-span-3\">\n                                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Country Name</label>\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"otherCountry\"\n                                                    required\n                                                    value={formData.otherCountry}\n                                                    onChange={handleChange}\n                                                    className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                />\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Account Section */}\n                                <div>\n                                    <h3 className=\"text-lg font-medium leading-6 text-gray-900 mb-4 border-b pb-2\">Account Information</h3>\n                                    <div className=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6\">\n                                        <div className=\"sm:col-span-6\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email address</label>\n                                            <input\n                                                type=\"email\"\n                                                name=\"email\"\n                                                required\n                                                value={formData.email}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n                                            <input\n                                                type=\"password\"\n                                                name=\"password\"\n                                                required\n                                                value={formData.password}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                        <div className=\"sm:col-span-3\">\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Confirm Password</label>\n                                            <input\n                                                type=\"password\"\n                                                name=\"confirmPassword\"\n                                                required\n                                                value={formData.confirmPassword}\n                                                onChange={handleChange}\n                                                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Step 2: Education & Documents */}\n                        {step === 2 && (\n                            <div className=\"space-y-8\">\n                                <div>\n                                    <div className=\"flex justify-between items-center mb-4 border-b pb-2\">\n                                        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Education History</h3>\n                                        <button\n                                            type=\"button\"\n                                            onClick={addEducation}\n                                            className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                                        >\n                                            <Plus className=\"mr-1 h-3 w-3\" />\n                                            Add Education\n                                        </button>\n                                    </div>\n\n                                    <div className=\"space-y-6\">\n                                        {formData.educationHistory.map((edu, index) => (\n                                            <div key={index} className=\"bg-gray-50 p-4 rounded-lg border border-gray-200 relative\">\n                                                {formData.educationHistory.length > 1 && (\n                                                    <button\n                                                        type=\"button\"\n                                                        onClick={() => removeEducation(index)}\n                                                        className=\"absolute top-2 right-2 text-gray-400 hover:text-red-500\"\n                                                    >\n                                                        <Trash2 className=\"h-5 w-5\" />\n                                                    </button>\n                                                )}\n                                                <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Education #{index + 1}</h4>\n                                                <div className=\"grid grid-cols-1 gap-y-4 gap-x-4 sm:grid-cols-6\">\n                                                    <div className=\"sm:col-span-2\">\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Level</label>\n                                                        <Select\n                                                            value={edu.level}\n                                                            onChange={(value) => handleEducationChange(index, 'level', value)}\n                                                            options={educationLevelOptions}\n                                                            showDescriptionInValue={false}\n                                                        />\n                                                    </div>\n                                                    <div className=\"sm:col-span-4\">\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Institution Name</label>\n                                                        <input\n                                                            type=\"text\"\n                                                            required\n                                                            value={edu.institution}\n                                                            onChange={(e) => handleEducationChange(index, 'institution', e.target.value)}\n                                                            className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                            placeholder=\"e.g. Chulalongkorn University\"\n                                                        />\n                                                    </div>\n                                                    <div className=\"sm:col-span-4\">\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Degree / Major / Certificate</label>\n                                                        <input\n                                                            type=\"text\"\n                                                            required\n                                                            value={edu.degreeName}\n                                                            onChange={(e) => handleEducationChange(index, 'degreeName', e.target.value)}\n                                                            className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                            placeholder=\"e.g. B.Sc. Computer Science\"\n                                                        />\n                                                    </div>\n                                                    <div className=\"sm:col-span-2\">\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">GPA</label>\n                                                        <input\n                                                            type=\"text\"\n                                                            value={edu.gpa}\n                                                            onChange={(e) => handleEducationChange(index, 'gpa', e.target.value)}\n                                                            className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border p-2\"\n                                                            placeholder=\"e.g. 3.50\"\n                                                        />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <h3 className=\"text-lg font-medium leading-6 text-gray-900 mb-4 border-b pb-2\">Required Documents</h3>\n                                    <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4\">\n                                        <div className=\"flex\">\n                                            <div className=\"ml-3\">\n                                                <p className=\"text-sm text-yellow-700\">\n                                                    Please prepare your documents. You can upload them now or later in your dashboard.\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"space-y-4\">\n                                        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors cursor-pointer\">\n                                            <div className=\"space-y-1\">\n                                                <div className=\"text-sm text-gray-600\">\n                                                    <label htmlFor=\"transcript-upload\" className=\"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500\">\n                                                        <span>Upload Transcript</span>\n                                                        <input id=\"transcript-upload\" name=\"transcript\" type=\"file\" className=\"sr-only\" />\n                                                    </label>\n                                                    <p className=\"pl-1\">or drag and drop</p>\n                                                </div>\n                                                <p className=\"text-xs text-gray-500\">PDF, PNG, JPG up to 10MB</p>\n                                            </div>\n                                        </div>\n\n                                        {extraDocs.map((id) => (\n                                            <div key={id} className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors cursor-pointer\">\n                                                <div className=\"space-y-1\">\n                                                    <div className=\"text-sm text-gray-600\">\n                                                        <label htmlFor={`doc-upload-${id}`} className=\"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500\">\n                                                            <span>Upload Additional Document {id}</span>\n                                                            <input id={`doc-upload-${id}`} name={`additionalDoc_${id}`} type=\"file\" className=\"sr-only\" />\n                                                        </label>\n                                                        <p className=\"pl-1\">or drag and drop</p>\n                                                    </div>\n                                                    <p className=\"text-xs text-gray-500\">PDF, PNG, JPG up to 10MB</p>\n                                                </div>\n                                            </div>\n                                        ))}\n\n                                        <button\n                                            type=\"button\"\n                                            onClick={addDoc}\n                                            className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                                        >\n                                            <Plus className=\"mr-2 h-4 w-4\" />\n                                            Add Another Document\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Navigation Buttons */}\n                        <div className=\"mt-8 flex justify-between\">\n                            {step > 1 ? (\n                                <button\n                                    type=\"button\"\n                                    onClick={prevStep}\n                                    className=\"flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                                >\n                                    <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                                    Back\n                                </button>\n                            ) : (\n                                <div></div> // Spacer\n                            )}\n\n                            {step < 2 ? (\n                                <button\n                                    type=\"button\"\n                                    onClick={nextStep}\n                                    className=\"flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                                >\n                                    Next\n                                    <ArrowRight className=\"ml-2 h-4 w-4\" />\n                                </button>\n                            ) : (\n                                <SubmitButton />\n                            )}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction StepIndicator({ currentStep, stepNumber, label }: { currentStep: number; stepNumber: number; label: string }) {\n    const isActive = currentStep >= stepNumber;\n    const isCurrent = currentStep === stepNumber;\n\n    return (\n        <div className=\"flex flex-col items-center relative z-10\">\n            <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors duration-200 ${isActive ? \"bg-blue-600 text-white\" : \"bg-gray-200 text-gray-500\"\n                    }`}\n            >\n                {isActive && !isCurrent ? <Check className=\"h-5 w-5\" /> : stepNumber}\n            </div>\n            <span className={`mt-2 text-xs font-medium ${isCurrent ? \"text-blue-600\" : \"text-gray-500\"}`}>\n                {label}\n            </span>\n        </div>\n    );\n}\n\nfunction SubmitButton() {\n    const { pending } = useFormStatus();\n\n    return (\n        <button\n            type=\"submit\"\n            disabled={pending}\n            className=\"flex items-center px-6 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n            {pending ? (\n                <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Creating Account...\n                </>\n            ) : (\n                <>\n                    Complete Registration\n                    <Check className=\"ml-2 h-4 w-4\" />\n                </>\n            )}\n        </button>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}