{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\nexport function formatDate(date: Date | string | number) {\n    return new Date(date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n    });\n}\n\nexport function formatCurrency(amount: number) {\n    return new Intl.NumberFormat(\"th-TH\", {\n        style: \"currency\",\n        currency: \"THB\",\n    }).format(amount);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB;AAEO,SAAS,WAAW,IAA4B;IACnD,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAC9C,MAAM;QACN,OAAO;QACP,KAAK;IACT;AACJ;AAEO,SAAS,eAAe,MAAc;IACzC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP,UAAU;IACd,GAAG,MAAM,CAAC;AACd"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/sub-navigation.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface SubNavItem {\n    label: string;\n    href: string;\n}\n\ninterface SubNavigationProps {\n    items: SubNavItem[];\n}\n\nexport function SubNavigation({ items }: SubNavigationProps) {\n    const pathname = usePathname();\n\n    return (\n        <div className=\"border-b border-gray-200 bg-white\">\n            <nav className=\"flex space-x-8 px-6\" aria-label=\"Sub navigation\">\n                {items.map((item) => {\n                    // Exact match first\n                    let isActive = pathname === item.href;\n\n                    // Then check if it's a parent route with children\n                    // But only if there are no other exact matches\n                    if (!isActive) {\n                        const exactMatch = items.some(i => i.href === pathname);\n                        if (!exactMatch && pathname.startsWith(item.href + \"/\")) {\n                            isActive = true;\n                        }\n                    }\n\n                    return (\n                        <Link\n                            key={item.href}\n                            href={item.href}\n                            className={cn(\n                                \"border-b-2 py-4 px-1 text-sm font-medium transition-colors\",\n                                isActive\n                                    ? \"border-blue-600 text-blue-600\"\n                                    : \"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                            )}\n                        >\n                            {item.label}\n                        </Link>\n                    );\n                })}\n            </nav>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAeO,SAAS,cAAc,EAAE,KAAK,EAAsB;IACvD,MAAM,WAAW,IAAA,iJAAW;IAE5B,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;YAAsB,cAAW;sBAC3C,MAAM,GAAG,CAAC,CAAC;gBACR,oBAAoB;gBACpB,IAAI,WAAW,aAAa,KAAK,IAAI;gBAErC,kDAAkD;gBAClD,+CAA+C;gBAC/C,IAAI,CAAC,UAAU;oBACX,MAAM,aAAa,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;oBAC9C,IAAI,CAAC,cAAc,SAAS,UAAU,CAAC,KAAK,IAAI,GAAG,MAAM;wBACrD,WAAW;oBACf;gBACJ;gBAEA,qBACI,8OAAC,uKAAI;oBAED,MAAM,KAAK,IAAI;oBACf,WAAW,IAAA,iIAAE,EACT,8DACA,WACM,kCACA;8BAGT,KAAK,KAAK;mBATN,KAAK,IAAI;;;;;YAY1B;;;;;;;;;;;AAIhB"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/leave-requests.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\n\n// Get all leave requests with filters  \nexport async function getLeaveRequests(filters?: {\n    status?: \"PENDING\" | \"APPROVED\" | \"REJECTED\";\n    facultyId?: string;\n    programId?: string;\n}) {\n    try {\n        const where: any = {};\n\n        if (filters?.status) {\n            where.status = filters.status;\n        }\n\n        if (filters?.programId) {\n            where.student = {\n                programId: filters.programId,\n            };\n        } else if (filters?.facultyId) {\n            where.student = {\n                program: {\n                    facultyId: filters.facultyId,\n                },\n            };\n        }\n\n        const requests = await prisma.leaveRequest.findMany({\n            where,\n            include: {\n                student: {\n                    select: {\n                        id: true,\n                        studentId: true,\n                        firstName: true,\n                        lastName: true,\n                        profileImageUrl: true,\n                        status: true,\n                        program: {\n                            select: {\n                                nameEn: true,\n                                faculty: {\n                                    select: {\n                                        nameEn: true,\n                                    },\n                                },\n                            },\n                        },\n                        user: {\n                            select: {\n                                email: true,\n                            },\n                        },\n                    },\n                },\n                reviewer: {\n                    select: {\n                        firstName: true,\n                        lastName: true,\n                    },\n                },\n            },\n            orderBy: [\n                { status: \"asc\" }, // PENDING first\n                { createdAt: \"desc\" },\n            ],\n        });\n\n        return {\n            success: true,\n            requests,\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave requests:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch leave requests\",\n            requests: [],\n        };\n    }\n}\n\n// Get single leave request\nexport async function getLeaveRequest(id: string) {\n    try {\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n            include: {\n                student: {\n                    select: {\n                        id: true,\n                        studentId: true,\n                        firstName: true,\n                        lastName: true,\n                        profileImageUrl: true,\n                        phone: true,\n                        status: true,\n                        program: {\n                            select: {\n                                nameEn: true,\n                                faculty: {\n                                    select: {\n                                        nameEn: true,\n                                    },\n                                },\n                            },\n                        },\n                        user: {\n                            select: {\n                                email: true,\n                            },\n                        },\n                    },\n                },\n                reviewer: {\n                    select: {\n                        firstName: true,\n                        lastName: true,\n                    },\n                },\n            },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        return {\n            success: true,\n            request,\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch leave request\",\n        };\n    }\n}\n\n// Approve leave request\nexport async function approveLeaveRequest(\n    id: string,\n    reviewedBy: string,\n    reviewNote?: string\n) {\n    try {\n        // Get the request first\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n            include: {\n                student: true,\n            },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        if (request.status !== \"PENDING\") {\n            return {\n                success: false,\n                error: \"Only pending requests can be approved\",\n            };\n        }\n\n        // Update request and student status in a transaction\n        await prisma.$transaction([\n            prisma.leaveRequest.update({\n                where: { id },\n                data: {\n                    status: \"APPROVED\",\n                    reviewedBy,\n                    reviewedAt: new Date(),\n                    reviewNote,\n                },\n            }),\n            prisma.student.update({\n                where: { id: request.studentId },\n                data: {\n                    status: \"ON_LEAVE\",\n                },\n            }),\n        ]);\n\n        revalidatePath(\"/admin/users/students/leave-management\");\n        revalidatePath(\"/admin/users/students/all-students\");\n\n        return {\n            success: true,\n            message: \"Leave request approved successfully\",\n        };\n    } catch (error) {\n        console.error(\"Error approving leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to approve leave request\",\n        };\n    }\n}\n\n// Reject leave request\nexport async function rejectLeaveRequest(\n    id: string,\n    reviewedBy: string,\n    reviewNote: string\n) {\n    try {\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        if (request.status !== \"PENDING\") {\n            return {\n                success: false,\n                error: \"Only pending requests can be rejected\",\n            };\n        }\n\n        if (!reviewNote || reviewNote.trim() === \"\") {\n            return {\n                success: false,\n                error: \"Review note is required for rejection\",\n            };\n        }\n\n        await prisma.leaveRequest.update({\n            where: { id },\n            data: {\n                status: \"REJECTED\",\n                reviewedBy,\n                reviewedAt: new Date(),\n                reviewNote,\n            },\n        });\n\n        revalidatePath(\"/admin/users/students/leave-management\");\n\n        return {\n            success: true,\n            message: \"Leave request rejected successfully\",\n        };\n    } catch (error) {\n        console.error(\"Error rejecting leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to reject leave request\",\n        };\n    }\n}\n\n// Get statistics\nexport async function getLeaveRequestStats() {\n    try {\n        const [pending, approved, rejected, total] = await Promise.all([\n            prisma.leaveRequest.count({ where: { status: \"PENDING\" } }),\n            prisma.leaveRequest.count({ where: { status: \"APPROVED\" } }),\n            prisma.leaveRequest.count({ where: { status: \"REJECTED\" } }),\n            prisma.leaveRequest.count(),\n        ]);\n\n        return {\n            success: true,\n            stats: {\n                pending,\n                approved,\n                rejected,\n                total,\n            },\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave request stats:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch statistics\",\n            stats: {\n                pending: 0,\n                approved: 0,\n                rejected: 0,\n                total: 0,\n            },\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAmJsB,sBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/leave-requests.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\n\n// Get all leave requests with filters  \nexport async function getLeaveRequests(filters?: {\n    status?: \"PENDING\" | \"APPROVED\" | \"REJECTED\";\n    facultyId?: string;\n    programId?: string;\n}) {\n    try {\n        const where: any = {};\n\n        if (filters?.status) {\n            where.status = filters.status;\n        }\n\n        if (filters?.programId) {\n            where.student = {\n                programId: filters.programId,\n            };\n        } else if (filters?.facultyId) {\n            where.student = {\n                program: {\n                    facultyId: filters.facultyId,\n                },\n            };\n        }\n\n        const requests = await prisma.leaveRequest.findMany({\n            where,\n            include: {\n                student: {\n                    select: {\n                        id: true,\n                        studentId: true,\n                        firstName: true,\n                        lastName: true,\n                        profileImageUrl: true,\n                        status: true,\n                        program: {\n                            select: {\n                                nameEn: true,\n                                faculty: {\n                                    select: {\n                                        nameEn: true,\n                                    },\n                                },\n                            },\n                        },\n                        user: {\n                            select: {\n                                email: true,\n                            },\n                        },\n                    },\n                },\n                reviewer: {\n                    select: {\n                        firstName: true,\n                        lastName: true,\n                    },\n                },\n            },\n            orderBy: [\n                { status: \"asc\" }, // PENDING first\n                { createdAt: \"desc\" },\n            ],\n        });\n\n        return {\n            success: true,\n            requests,\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave requests:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch leave requests\",\n            requests: [],\n        };\n    }\n}\n\n// Get single leave request\nexport async function getLeaveRequest(id: string) {\n    try {\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n            include: {\n                student: {\n                    select: {\n                        id: true,\n                        studentId: true,\n                        firstName: true,\n                        lastName: true,\n                        profileImageUrl: true,\n                        phone: true,\n                        status: true,\n                        program: {\n                            select: {\n                                nameEn: true,\n                                faculty: {\n                                    select: {\n                                        nameEn: true,\n                                    },\n                                },\n                            },\n                        },\n                        user: {\n                            select: {\n                                email: true,\n                            },\n                        },\n                    },\n                },\n                reviewer: {\n                    select: {\n                        firstName: true,\n                        lastName: true,\n                    },\n                },\n            },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        return {\n            success: true,\n            request,\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch leave request\",\n        };\n    }\n}\n\n// Approve leave request\nexport async function approveLeaveRequest(\n    id: string,\n    reviewedBy: string,\n    reviewNote?: string\n) {\n    try {\n        // Get the request first\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n            include: {\n                student: true,\n            },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        if (request.status !== \"PENDING\") {\n            return {\n                success: false,\n                error: \"Only pending requests can be approved\",\n            };\n        }\n\n        // Update request and student status in a transaction\n        await prisma.$transaction([\n            prisma.leaveRequest.update({\n                where: { id },\n                data: {\n                    status: \"APPROVED\",\n                    reviewedBy,\n                    reviewedAt: new Date(),\n                    reviewNote,\n                },\n            }),\n            prisma.student.update({\n                where: { id: request.studentId },\n                data: {\n                    status: \"ON_LEAVE\",\n                },\n            }),\n        ]);\n\n        revalidatePath(\"/admin/users/students/leave-management\");\n        revalidatePath(\"/admin/users/students/all-students\");\n\n        return {\n            success: true,\n            message: \"Leave request approved successfully\",\n        };\n    } catch (error) {\n        console.error(\"Error approving leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to approve leave request\",\n        };\n    }\n}\n\n// Reject leave request\nexport async function rejectLeaveRequest(\n    id: string,\n    reviewedBy: string,\n    reviewNote: string\n) {\n    try {\n        const request = await prisma.leaveRequest.findUnique({\n            where: { id },\n        });\n\n        if (!request) {\n            return {\n                success: false,\n                error: \"Leave request not found\",\n            };\n        }\n\n        if (request.status !== \"PENDING\") {\n            return {\n                success: false,\n                error: \"Only pending requests can be rejected\",\n            };\n        }\n\n        if (!reviewNote || reviewNote.trim() === \"\") {\n            return {\n                success: false,\n                error: \"Review note is required for rejection\",\n            };\n        }\n\n        await prisma.leaveRequest.update({\n            where: { id },\n            data: {\n                status: \"REJECTED\",\n                reviewedBy,\n                reviewedAt: new Date(),\n                reviewNote,\n            },\n        });\n\n        revalidatePath(\"/admin/users/students/leave-management\");\n\n        return {\n            success: true,\n            message: \"Leave request rejected successfully\",\n        };\n    } catch (error) {\n        console.error(\"Error rejecting leave request:\", error);\n        return {\n            success: false,\n            error: \"Failed to reject leave request\",\n        };\n    }\n}\n\n// Get statistics\nexport async function getLeaveRequestStats() {\n    try {\n        const [pending, approved, rejected, total] = await Promise.all([\n            prisma.leaveRequest.count({ where: { status: \"PENDING\" } }),\n            prisma.leaveRequest.count({ where: { status: \"APPROVED\" } }),\n            prisma.leaveRequest.count({ where: { status: \"REJECTED\" } }),\n            prisma.leaveRequest.count(),\n        ]);\n\n        return {\n            success: true,\n            stats: {\n                pending,\n                approved,\n                rejected,\n                total,\n            },\n        };\n    } catch (error) {\n        console.error(\"Error fetching leave request stats:\", error);\n        return {\n            success: false,\n            error: \"Failed to fetch statistics\",\n            stats: {\n                pending: 0,\n                approved: 0,\n                rejected: 0,\n                total: 0,\n            },\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAmNsB,qBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/leave-requests/leave-request-card.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useTransition } from \"react\";\nimport { approveLeaveRequest, rejectLeaveRequest } from \"@/actions/leave-requests\";\nimport { Calendar, User, FileText, CheckCircle, XCircle, AlertCircle } from \"lucide-react\";\nimport { format, differenceInDays } from \"date-fns\";\n\ninterface LeaveRequestCardProps {\n    request: any;\n}\n\nexport function LeaveRequestCard({ request }: LeaveRequestCardProps) {\n    const [isPending, startTransition] = useTransition();\n    const [showApproveDialog, setShowApproveDialog] = useState(false);\n    const [showRejectDialog, setShowRejectDialog] = useState(false);\n    const [approveNote, setApproveNote] = useState(\"\");\n    const [rejectNote, setRejectNote] = useState(\"\");\n\n    const duration = differenceInDays(new Date(request.endDate), new Date(request.startDate)) + 1;\n\n    const handleApprove = () => {\n        startTransition(async () => {\n            // TODO: Get current user ID\n            const reviewerId = \"temp-admin-id\"; // Replace with actual user ID\n            const result = await approveLeaveRequest(request.id, reviewerId, approveNote);\n\n            if (result.success) {\n                setShowApproveDialog(false);\n                setApproveNote(\"\");\n            } else {\n                alert(result.error);\n            }\n        });\n    };\n\n    const handleReject = () => {\n        if (!rejectNote.trim()) {\n            alert(\"Please provide a reason for rejection\");\n            return;\n        }\n\n        startTransition(async () => {\n            //TODO: Get current user ID\n            const reviewerId = \"temp-admin-id\"; // Replace with actual user ID\n            const result = await rejectLeaveRequest(request.id, reviewerId, rejectNote);\n\n            if (result.success) {\n                setShowRejectDialog(false);\n                setRejectNote(\"\");\n            } else {\n                alert(result.error);\n            }\n        });\n    };\n\n    const statusColors = {\n        PENDING: \"bg-orange-100 text-orange-800\",\n        APPROVED: \"bg-green-100 text-green-800\",\n        REJECTED: \"bg-red-100 text-red-800\",\n    };\n\n    const status = request.status as \"PENDING\" | \"APPROVED\" | \"REJECTED\";\n\n    return (\n        <>\n            <div className=\"rounded-lg border bg-card p-6\">\n                <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1 space-y-3\">\n                        {/* Student Info */}\n                        <div className=\"flex items-center gap-3\">\n                            <User className=\"h-5 w-5 text-blue-600\" />\n                            <div>\n                                <p className=\"font-semibold\">\n                                    {request.student.firstName} {request.student.lastName}\n                                </p>\n                                <p className=\"text-sm text-muted-foreground\">\n                                    {request.student.studentId} | {request.student.program?.nameEn} | {request.student.program?.faculty?.nameEn}\n                                </p>\n                            </div>\n                        </div>\n\n                        {/* Dates */}\n                        <div className=\"flex items-center gap-3\">\n                            <Calendar className=\"h-5 w-5 text-gray-600\" />\n                            <p className=\"text-sm\">\n                                <span className=\"font-medium\">\n                                    {format(new Date(request.startDate), \"MMM d, yyyy\")}\n                                </span>\n                                {\" - \"}\n                                <span className=\"font-medium\">\n                                    {format(new Date(request.endDate), \"MMM d, yyyy\")}\n                                </span>\n                                <span className=\"text-muted-foreground ml-2\">({duration} days)</span>\n                            </p>\n                        </div>\n\n                        {/* Reason */}\n                        <div className=\"flex items-start gap-3\">\n                            <FileText className=\"h-5 w-5 text-gray-600 mt-0.5\" />\n                            <div className=\"flex-1\">\n                                <p className=\"text-sm font-medium\">Reason:</p>\n                                <p className=\"text-sm text-muted-foreground mt-1\">{request.reason}</p>\n                            </div>\n                        </div>\n\n                        {/* Review Info (if reviewed) */}\n                        {request.status !== \"PENDING\" && request.reviewedAt && (\n                            <div className=\"flex items-start gap-3 pt-2 border-t\">\n                                <AlertCircle className=\"h-5 w-5 text-gray-600 mt-0.5\" />\n                                <div className=\"flex-1\">\n                                    <p className=\"text-sm\">\n                                        <span className=\"font-medium\">Reviewed by:</span>{\" \"}\n                                        {request.reviewer ? `${request.reviewer.firstName} ${request.reviewer.lastName}` : \"Unknown\"}\n                                    </p>\n                                    <p className=\"text-sm text-muted-foreground\">\n                                        {format(new Date(request.reviewedAt), \"MMM d, yyyy 'at' HH:mm\")}\n                                    </p>\n                                    {request.reviewNote && (\n                                        <p className=\"text-sm text-muted-foreground mt-1\">\n                                            <span className=\"font-medium\">Note:</span> {request.reviewNote}\n                                        </p>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Status & Actions */}\n                    <div className=\"flex flex-col items-end gap-3\">\n                        <span className={`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${statusColors[status]}`}>\n                            {request.status}\n                        </span>\n\n                        {request.status === \"PENDING\" && (\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setShowApproveDialog(true)}\n                                    disabled={isPending}\n                                    className=\"inline-flex items-center gap-1 rounded-md bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700 disabled:opacity-50\"\n                                >\n                                    <CheckCircle className=\"h-4 w-4\" />\n                                    Approve\n                                </button>\n                                <button\n                                    onClick={() => setShowRejectDialog(true)}\n                                    disabled={isPending}\n                                    className=\"inline-flex items-center gap-1 rounded-md bg-red-600 px-3 py-2 text-sm text-white hover:bg-red-700 disabled:opacity-50\"\n                                >\n                                    <XCircle className=\"h-4 w-4\" />\n                                    Reject\n                                </button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Approve Dialog */}\n            {showApproveDialog && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n                    <div className=\"w-full max-w-md rounded-lg bg-white p-6 shadow-lg\">\n                        <h3 className=\"text-lg font-semibold mb-4\">Approve Leave Request</h3>\n                        <p className=\"text-sm text-muted-foreground mb-4\">\n                            This will approve the leave request for {request.student.firstName} {request.student.lastName} and change their status to ON_LEAVE.\n                        </p>\n                        <div className=\"space-y-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium mb-2\">\n                                    Note (Optional)\n                                </label>\n                                <textarea\n                                    value={approveNote}\n                                    onChange={(e) => setApproveNote(e.target.value)}\n                                    className=\"w-full rounded-md border border-input px-3 py-2 text-sm\"\n                                    rows={3}\n                                    placeholder=\"Add any notes for approval...\"\n                                />\n                            </div>\n                            <div className=\"flex gap-3 justify-end\">\n                                <button\n                                    onClick={() => setShowApproveDialog(false)}\n                                    className=\"rounded-md border px-4 py-2 text-sm hover:bg-gray-50\"\n                                >\n                                    Cancel\n                                </button>\n                                <button\n                                    onClick={handleApprove}\n                                    disabled={isPending}\n                                    className=\"rounded-md bg-green-600 px-4 py-2 text-sm text-white hover:bg-green-700 disabled:opacity-50\"\n                                >\n                                    {isPending ? \"Approving...\" : \"Approve\"}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Reject Dialog */}\n            {showRejectDialog && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n                    <div className=\"w-full max-w-md rounded-lg bg-white p-6 shadow-lg\">\n                        <h3 className=\"text-lg font-semibold mb-4\">Reject Leave Request</h3>\n                        <p className=\"text-sm text-muted-foreground mb-4\">\n                            This will reject the leave request for {request.student.firstName} {request.student.lastName}.\n                        </p>\n                        <div className=\"space-y-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium mb-2\">\n                                    Reason for Rejection <span className=\"text-red-600\">*</span>\n                                </label>\n                                <textarea\n                                    value={rejectNote}\n                                    onChange={(e) => setRejectNote(e.target.value)}\n                                    className=\"w-full rounded-md border border-input px-3 py-2 text-sm\"\n                                    rows={3}\n                                    placeholder=\"Please provide a reason for rejection...\"\n                                    required\n                                />\n                            </div>\n                            <div className=\"flex gap-3 justify-end\">\n                                <button\n                                    onClick={() => setShowRejectDialog(false)}\n                                    className=\"rounded-md border px-4 py-2 text-sm hover:bg-gray-50\"\n                                >\n                                    Cancel\n                                </button>\n                                <button\n                                    onClick={handleReject}\n                                    disabled={isPending || !rejectNote.trim()}\n                                    className=\"rounded-md bg-red-600 px-4 py-2 text-sm text-white hover:bg-red-700 disabled:opacity-50\"\n                                >\n                                    {isPending ? \"Rejecting...\" : \"Reject\"}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 710, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/leave-requests/leave-request-filters.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useTransition } from \"react\";\n\ninterface LeaveRequestFiltersProps {\n    faculties: any[];\n    programs: any[];\n}\n\nexport function LeaveRequestFilters({ faculties, programs }: LeaveRequestFiltersProps) {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const [isPending, startTransition] = useTransition();\n\n    const currentStatus = searchParams.get(\"status\") || \"\";\n    const currentFacultyId = searchParams.get(\"facultyId\") || \"\";\n    const currentProgramId = searchParams.get(\"programId\") || \"\";\n\n    const handleFilterChange = (key: string, value: string) => {\n        const params = new URLSearchParams(searchParams.toString());\n\n        if (value) {\n            params.set(key, value);\n\n            // Clear child filters\n            if (key === \"facultyId\") {\n                params.delete(\"programId\");\n            }\n        } else {\n            params.delete(key);\n\n            // Clear child filters\n            if (key === \"facultyId\") {\n                params.delete(\"programId\");\n            }\n        }\n\n        startTransition(() => {\n            router.push(`?${params.toString()}`);\n        });\n    };\n\n    // Filter programs by selected faculty\n    const filteredPrograms = currentFacultyId\n        ? programs.filter((p: any) => p.facultyId === currentFacultyId)\n        : programs;\n\n    return (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n            {/* Status Filter */}\n            <select\n                value={currentStatus}\n                onChange={(e) => handleFilterChange(\"status\", e.target.value)}\n                className=\"rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n                <option value=\"\">All Status</option>\n                <option value=\"PENDING\">Pending</option>\n                <option value=\"APPROVED\">Approved</option>\n                <option value=\"REJECTED\">Rejected</option>\n            </select>\n\n            {/* Faculty Filter */}\n            <select\n                value={currentFacultyId}\n                onChange={(e) => handleFilterChange(\"facultyId\", e.target.value)}\n                className=\"rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n                <option value=\"\">All Faculties</option>\n                {faculties.map((faculty: any) => (\n                    <option key={faculty.id} value={faculty.id}>\n                        {faculty.nameEn}\n                    </option>\n                ))}\n            </select>\n\n            {/* Program Filter */}\n            <select\n                value={currentProgramId}\n                onChange={(e) => handleFilterChange(\"programId\", e.target.value)}\n                className=\"rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n                <option value=\"\">All Programs</option>\n                {filteredPrograms.map((program: any) => (\n                    <option key={program.id} value={program.id}>\n                        {program.nameEn}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,oBAAoB,EAAE,SAAS,EAAE,QAAQ,EAA4B;IACjF,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAElD,MAAM,gBAAgB,aAAa,GAAG,CAAC,aAAa;IACpD,MAAM,mBAAmB,aAAa,GAAG,CAAC,gBAAgB;IAC1D,MAAM,mBAAmB,aAAa,GAAG,CAAC,gBAAgB;IAE1D,MAAM,qBAAqB,CAAC,KAAa;QACrC,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QAExD,IAAI,OAAO;YACP,OAAO,GAAG,CAAC,KAAK;YAEhB,sBAAsB;YACtB,IAAI,QAAQ,aAAa;gBACrB,OAAO,MAAM,CAAC;YAClB;QACJ,OAAO;YACH,OAAO,MAAM,CAAC;YAEd,sBAAsB;YACtB,IAAI,QAAQ,aAAa;gBACrB,OAAO,MAAM,CAAC;YAClB;QACJ;QAEA,gBAAgB;YACZ,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI;QACvC;IACJ;IAEA,sCAAsC;IACtC,MAAM,mBAAmB,mBACnB,SAAS,MAAM,CAAC,CAAC,IAAW,EAAE,SAAS,KAAK,oBAC5C;IAEN,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBACG,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,UAAU,EAAE,MAAM,CAAC,KAAK;gBAC5D,WAAU;;kCAEV,8OAAC;wBAAO,OAAM;kCAAG;;;;;;kCACjB,8OAAC;wBAAO,OAAM;kCAAU;;;;;;kCACxB,8OAAC;wBAAO,OAAM;kCAAW;;;;;;kCACzB,8OAAC;wBAAO,OAAM;kCAAW;;;;;;;;;;;;0BAI7B,8OAAC;gBACG,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,aAAa,EAAE,MAAM,CAAC,KAAK;gBAC/D,WAAU;;kCAEV,8OAAC;wBAAO,OAAM;kCAAG;;;;;;oBAChB,UAAU,GAAG,CAAC,CAAC,wBACZ,8OAAC;4BAAwB,OAAO,QAAQ,EAAE;sCACrC,QAAQ,MAAM;2BADN,QAAQ,EAAE;;;;;;;;;;;0BAO/B,8OAAC;gBACG,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,aAAa,EAAE,MAAM,CAAC,KAAK;gBAC/D,WAAU;;kCAEV,8OAAC;wBAAO,OAAM;kCAAG;;;;;;oBAChB,iBAAiB,GAAG,CAAC,CAAC,wBACnB,8OAAC;4BAAwB,OAAO,QAAQ,EAAE;sCACrC,QAAQ,MAAM;2BADN,QAAQ,EAAE;;;;;;;;;;;;;;;;;AAO3C"}}]
}