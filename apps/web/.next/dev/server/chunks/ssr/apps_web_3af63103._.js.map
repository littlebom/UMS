{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/actions/settings.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@ums/lib\";\nimport { revalidatePath } from \"next/cache\";\nimport { getAdminSession } from \"./auth\";\n\nexport async function getSystemSettings() {\n    let settings = await prisma.systemSettings.findFirst();\n\n    if (!settings) {\n        // Create default settings if not exists\n        settings = await prisma.systemSettings.create({\n            data: {},\n        });\n    } else {\n        // Auto-update legacy defaults if they match the old defaults\n        // This ensures the user sees the requested default values\n        const isOldDefaultName = settings.universityName === \"University Management System\";\n        const isOldDefaultNameTh = settings.universityNameTh === \"ระบบจัดการมหาวิทยาลัย\";\n\n        if (isOldDefaultName || isOldDefaultNameTh) {\n            settings = await prisma.systemSettings.update({\n                where: { id: settings.id },\n                data: {\n                    universityName: isOldDefaultName ? \"University MS\" : settings.universityName,\n                    universityNameTh: isOldDefaultNameTh ? \"ระบบจัดการข้อมูลมหาวิทยาลัย\" : settings.universityNameTh,\n                }\n            });\n        }\n    }\n\n    return settings;\n}\n\nexport async function updateSystemSettings(formData: FormData) {\n    const session = await getAdminSession();\n    if (!session) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const universityName = formData.get(\"universityName\") as string;\n    const universityNameTh = formData.get(\"universityNameTh\") as string;\n    const logoUrl = formData.get(\"logoUrl\") as string;\n    const primaryColor = formData.get(\"primaryColor\") as string;\n    const secondaryColor = formData.get(\"secondaryColor\") as string;\n    const backgroundColor = formData.get(\"backgroundColor\") as string;\n    const studentIdFormat = formData.get(\"studentIdFormat\") as string;\n    const defaultLanguage = formData.get(\"defaultLanguage\") as string;\n\n    console.log(\"Updating settings:\", { universityName, universityNameTh, logoUrl });\n\n    const settings = await getSystemSettings();\n\n    await prisma.systemSettings.update({\n        where: { id: settings.id },\n        data: {\n            universityName,\n            universityNameTh,\n            logoUrl: logoUrl || null,\n            primaryColor,\n            secondaryColor,\n            backgroundColor,\n            studentIdFormat,\n            defaultLanguage,\n        },\n    });\n\n    revalidatePath(\"/admin/settings\");\n    revalidatePath(\"/\");\n}\n"],"names":[],"mappings":";;;;;;;IAMsB,oBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/language-switcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { useLanguage } from \"@/contexts/language-context\";\nimport { Globe } from \"lucide-react\";\n\nexport function LanguageSwitcher() {\n    const { locale, setLocale } = useLanguage();\n\n    const toggleLanguage = () => {\n        setLocale(locale === \"en\" ? \"th\" : \"en\");\n    };\n\n    return (\n        <button\n            onClick={toggleLanguage}\n            className=\"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors\"\n            title={locale === \"en\" ? \"Switch to Thai\" : \"Switch to English\"}\n        >\n            <Globe className=\"h-4 w-4\" />\n            <span>{locale === \"en\" ? \"EN\" : \"TH\"}</span>\n        </button>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS;IACZ,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,8JAAW;IAEzC,MAAM,iBAAiB;QACnB,UAAU,WAAW,OAAO,OAAO;IACvC;IAEA,qBACI,8OAAC;QACG,SAAS;QACT,WAAU;QACV,OAAO,WAAW,OAAO,mBAAmB;;0BAE5C,8OAAC,6MAAK;gBAAC,WAAU;;;;;;0BACjB,8OAAC;0BAAM,WAAW,OAAO,OAAO;;;;;;;;;;;;AAG5C"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/jira/UMS/apps/web/components/public-navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { GraduationCap } from \"lucide-react\";\nimport { getSystemSettings } from \"@/actions/settings\";\nimport { LanguageSwitcher } from \"@/components/language-switcher\";\nimport { useLanguage } from \"@/contexts/language-context\";\nimport { useEffect, useState } from \"react\";\n\nexport function PublicNavbar() {\n    return <PublicNavbarClient />;\n}\n\nfunction PublicNavbarClient() {\n    const [settings, setSettings] = useState<any>(null);\n    const { t } = useLanguage();\n\n    useEffect(() => {\n        getSystemSettings().then(setSettings);\n    }, []);\n\n    return (\n        <nav className=\"bg-white shadow-sm\">\n            <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n                <div className=\"flex h-16 items-center justify-between\">\n                    {/* Left: Logo */}\n                    <div className=\"flex flex-shrink-0 items-center\">\n                        <Link href=\"/\" className=\"flex items-center\">\n                            {settings?.logoUrl ? (\n                                <img\n                                    src={settings.logoUrl}\n                                    alt=\"Logo\"\n                                    className=\"h-10 w-auto object-contain\"\n                                />\n                            ) : (\n                                <>\n                                    <GraduationCap className=\"h-8 w-8 text-blue-600\" />\n                                    <span className=\"ml-2 text-xl font-bold text-gray-900\">\n                                        {settings?.universityName || \"UMS\"}\n                                    </span>\n                                </>\n                            )}\n                        </Link>\n                    </div>\n\n                    {/* Center: Menu */}\n                    <div className=\"hidden md:flex md:flex-1 md:justify-center md:space-x-8\">\n                        <Link\n                            href=\"/\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.home}\n                        </Link>\n                        <Link\n                            href=\"/curriculum\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.curriculum}\n                        </Link>\n                        <Link\n                            href=\"/admissions\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.common.admissions}\n                        </Link>\n                        <Link\n                            href=\"/students\"\n                            className=\"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700\"\n                        >\n                            {t.menu.students}\n                        </Link>\n                    </div>\n\n                    {/* Right: Actions */}\n                    <div className=\"flex items-center space-x-4\">\n                        <LanguageSwitcher />\n                        <Link\n                            href=\"/login\"\n                            className=\"rounded-md bg-blue-600 px-8 py-2 text-sm font-medium text-white hover:bg-blue-700\"\n                        >\n                            {t.applicant.login}\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        </nav>\n    );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASO,SAAS;IACZ,qBAAO,8OAAC;;;;;AACZ;AAEA,SAAS;IACL,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAM;IAC9C,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,8JAAW;IAEzB,IAAA,kNAAS,EAAC;QACN,IAAA,mLAAiB,IAAG,IAAI,CAAC;IAC7B,GAAG,EAAE;IAEL,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;sCACpB,UAAU,wBACP,8OAAC;gCACG,KAAK,SAAS,OAAO;gCACrB,KAAI;gCACJ,WAAU;;;;;qDAGd;;kDACI,8OAAC,yOAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC;wCAAK,WAAU;kDACX,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;kCAQjD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,IAAI;;;;;;0CAEhB,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,UAAU;;;;;;0CAEtB,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,MAAM,CAAC,UAAU;;;;;;0CAExB,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,IAAI,CAAC,QAAQ;;;;;;;;;;;;kCAKxB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,sKAAgB;;;;;0CACjB,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CAET,EAAE,SAAS,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9C"}}]
}